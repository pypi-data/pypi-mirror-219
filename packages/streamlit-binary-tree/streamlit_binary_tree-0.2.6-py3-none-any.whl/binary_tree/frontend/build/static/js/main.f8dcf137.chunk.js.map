{"version":3,"sources":["ArgsContext.tsx","NodeContent.tsx","EdgeContent.tsx","Node.tsx","Tree.tsx","index.tsx"],"names":["default_args","ArgsContext","createContext","NodeContent","_ref","id","args","useContext","data","show_node_ids","node_data","find","a","node_id","_jsx","_Fragment","children","_jsxs","className","onClick","e","value","Streamlit","setComponentValue","style","backgroundColor","color","contents","map","content","i","EdgeContent","isLeft","left","condition","Node","_useState","useState","childrenVisible","expanded","_useState2","_slicedToArray","setChildrenVisible","hasChildren","right","childrenVisibleStyle","opacity","maxHeight","maxWidth","overflowX","withStreamlitConnection","props","key","lastFrameHeight","setLastFrameHeight","treeRef","useRef","Object","entries","forEach","_ref2","concat","replaceAll","document","getElementById","setProperty","useEffect","intervalId","setInterval","current","clientHeight","setFrameHeight","clearInterval","treeToPng","_ref3","_asyncToGenerator","_regeneratorRuntime","mark","_callee","element","useWidth","canvas","dataURL","wrap","_context","prev","next","querySelector","console","log","scrollWidth","clientWidth","html2canvas","width","windowWidth","sent","toDataURL","downloadjs","stop","apply","arguments","Provider","ref","ReactDOM","render","React","StrictMode","StreamlitProvider","Tree"],"mappings":"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","file":"static/js/main.f8dcf137.chunk.js","sourcesContent":["import { createContext } from \"react\"\r\n\r\nconst default_args: any = {}\r\nexport const ArgsContext = createContext(default_args)\r\n","import { useContext } from \"react\"\r\nimport { Streamlit } from \"streamlit-component-lib\"\r\nimport { ArgsContext } from \"./ArgsContext\"\r\nimport type { NodeObject, NodeId } from \"./Node\"\r\n\r\nconst NodeContent = ({ id }: NodeId) => {\r\n  const args = useContext(ArgsContext)\r\n  const data: NodeObject[] = args.data\r\n  const show_node_ids: boolean = args.show_node_ids\r\n  const node_data = data.find((a) => a.node_id === id)\r\n\r\n  const updateValue = (value: number) => {\r\n    Streamlit.setComponentValue(value)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"node\">\r\n        {show_node_ids && (\r\n          <div\r\n            className=\"node-content-left\"\r\n            onClick={(e) => {\r\n              updateValue(id)\r\n            }}\r\n            style={{ backgroundColor: node_data!.color }}\r\n          >\r\n            {node_data!.node_id}\r\n          </div>\r\n        )}\r\n        <div className=\"node-content-right\">\r\n          {node_data!.contents.map(function (content, i) {\r\n            return (\r\n              <div className=\"node-content-right-item\" key={i}>\r\n                {content}\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default NodeContent\r\n","import { useContext } from \"react\"\r\nimport { ArgsContext } from \"./ArgsContext\"\r\nimport type { NodeObject } from \"./Node\"\r\n\r\ninterface EdgeType {\r\n  id: number\r\n  isLeft: boolean\r\n}\r\n\r\nconst EdgeContent = ({ id, isLeft }: EdgeType) => {\r\n  const args = useContext(ArgsContext)\r\n  const data: NodeObject[] = args.data\r\n  const node_data = data.find((a) => a.node_id === id)\r\n\r\n  return (\r\n    <>\r\n      <div className=\"edge-content\">\r\n        {isLeft ? node_data!.left.condition : node_data!.left.condition}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default EdgeContent\r\n","import { useState, useContext } from \"react\"\r\nimport { ArgsContext } from \"./ArgsContext\"\r\n\r\nimport NodeContent from \"./NodeContent\"\r\nimport EdgeContent from \"./EdgeContent\"\r\n\r\nexport interface NodeObject {\r\n  node_id: number\r\n  left: {\r\n    id: number\r\n    condition: string\r\n  }\r\n  right: {\r\n    id: number\r\n    condition: string\r\n  }\r\n  contents: string[]\r\n  color: string\r\n  childrenVisible: boolean\r\n}\r\n\r\nexport interface NodeId {\r\n  id: number\r\n}\r\n\r\nconst Node = ({ id }: NodeId) => {\r\n  const args = useContext(ArgsContext)\r\n  const data: NodeObject[] = args.data\r\n  const node_data = data.find((a) => a.node_id === id)\r\n  const [childrenVisible, setChildrenVisible] = useState(\r\n    node_data!.childrenVisible != null\r\n      ? node_data!.childrenVisible\r\n      : args.expanded\r\n  )\r\n\r\n  node_data!.childrenVisible = childrenVisible\r\n\r\n  const hasChildren = node_data!.left != null && node_data!.right != null\r\n  const childrenVisibleStyle = childrenVisible\r\n    ? {}\r\n    : ({\r\n        opacity: 0,\r\n        maxHeight: 0,\r\n        maxWidth: 0,\r\n        overflowX: \"hidden\",\r\n      } as React.CSSProperties)\r\n\r\n  // console.log(\"id \", id, node_data, hasChildren)\r\n\r\n  function switchChildrenVisible() {\r\n    setChildrenVisible(!childrenVisible)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <NodeContent id={id} />\r\n      {hasChildren && (\r\n        <div\r\n          className=\"child-button\"\r\n          onClick={(e) => switchChildrenVisible()}\r\n        ></div>\r\n      )}\r\n\r\n      {hasChildren && (\r\n        <ul style={childrenVisibleStyle}>\r\n          <li>\r\n            <EdgeContent id={id} isLeft={true} key={id} />\r\n            <Node id={node_data!.left.id} key={node_data!.left.id} />\r\n          </li>\r\n          <li>\r\n            <EdgeContent id={id} isLeft={false} key={id} />\r\n            <Node id={node_data!.right.id} key={node_data!.right.id} />\r\n          </li>\r\n        </ul>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Node\r\n","import {\n  ComponentProps,\n  Streamlit,\n  withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport React, { useEffect, useState, useRef } from \"react\"\n\nimport downloadjs from \"downloadjs\"\nimport html2canvas from \"html2canvas\"\nimport { ArgsContext } from \"./ArgsContext\"\nimport Node from \"./Node\"\nimport \"./Node.scss\"\n\nconst setStyle = (style: object) => {\n  Object.entries(style).forEach(([key, value]) => {\n    key = `--${key.replaceAll(\"_\", \"-\")}`\n    document.getElementById(\"root\")!.style.setProperty(key, value)\n  })\n}\n\nconst Tree = (props: ComponentProps) => {\n  const args = props.args\n  const key = args.key\n  const [lastFrameHeight, setLastFrameHeight] = useState(0)\n  const treeRef: any = useRef(null)\n\n  // console.log(args.style)\n  setStyle(args.style)\n\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      if (treeRef.current != null) {\n        setLastFrameHeight(treeRef.current!.clientHeight)\n      }\n    }, 20)\n    Streamlit.setFrameHeight()\n    // console.log(\n    //   lastFrameHeight,\n    //   Streamlit.lastFrameHeight,\n    //   treeRef.current!.clientHeight\n    // )\n    return () => clearInterval(intervalId)\n  }, [lastFrameHeight])\n\n  const treeToPng = async () => {\n    const element = document.querySelector(\".tree\")!\n    console.log(element.scrollWidth, element.clientWidth)\n    const useWidth = element.scrollWidth\n    const canvas = await html2canvas(document.querySelector(\".tree\")!, {\n      width: useWidth,\n      windowWidth: useWidth,\n    })\n    const dataURL = canvas.toDataURL(\"image/jpg\")\n    downloadjs(dataURL, `${key}.jpg`, \"image/jpg\")\n  }\n\n  // const theme = args.theme\n  // const style: React.CSSProperties = {}\n\n  return (\n    <ArgsContext.Provider value={args}>\n      <button onClick={(e) => treeToPng()}>Download as Image</button>\n      <div className=\"tree\" ref={treeRef}>\n        <ul className=\"rootNode\">\n          <li>\n            <Node id={0} />\n          </li>\n        </ul>\n      </div>\n      <br />\n    </ArgsContext.Provider>\n  )\n}\n\nexport default withStreamlitConnection(Tree)\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { StreamlitProvider } from \"streamlit-component-lib-react-hooks\"\nimport Tree from \"./Tree\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <StreamlitProvider>\n      <Tree />\n    </StreamlitProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}