---
- name: Delete logrotate
  ansible.builtin.file:
    path: "/etc/logrotate.d/talos-logrotate.conf"
    state: absent
  become: true

- name: Stop WebService
  ansible.builtin.service:
    name: "{{ http_service }}"
    enabled: false
    state: stopped

- name: Restore backup config files
  ansible.builtin.copy:
    src: "{{ http_config }}.old"
    dest: "{{ http_config }}"
    remote_src: true
    force: true
    follow: true
    mode: '0755'

- name: Delete talos directories
  ansible.builtin.file:
    path: "{{ item }}"
    state: absent
  loop:
    - "{{ app.dir }}"
    - "{{ app.etcdir }}"
    - "{{ app.logdir }}"
    - "{{ app.webdir }}"
