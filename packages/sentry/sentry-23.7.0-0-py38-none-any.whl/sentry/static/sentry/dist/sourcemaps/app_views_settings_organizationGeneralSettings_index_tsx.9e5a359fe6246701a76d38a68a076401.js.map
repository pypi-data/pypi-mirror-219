{"version":3,"file":"chunks/app_views_settings_organizationGeneralSettings_index_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/data/forms/organizationGeneralSettings.tsx","webpack:///./app/utils/slugify.tsx","webpack:///./app/views/settings/organization/permissionAlert.tsx","webpack:///./app/views/settings/organizationGeneralSettings/organizationSettingsForm.tsx","webpack:///./app/views/settings/organizationGeneralSettings/index.tsx"],"sourcesContent":["import {JsonFormObject} from 'sentry/components/forms/types';\nimport ExternalLink from 'sentry/components/links/externalLink';\nimport {t, tct} from 'sentry/locale';\nimport {MemberRole} from 'sentry/types';\nimport slugify from 'sentry/utils/slugify';\n\n// Export route to make these forms searchable by label/help\nexport const route = '/settings/:orgId/';\n\nconst formGroups: JsonFormObject[] = [\n  {\n    // Form \"section\"/\"panel\"\n    title: t('General'),\n    fields: [\n      {\n        name: 'slug',\n        type: 'string',\n        required: true,\n        label: t('Organization Slug'),\n        help: t('A unique ID used to identify this organization'),\n        transformInput: slugify,\n        saveOnBlur: false,\n        saveMessageAlertType: 'info',\n        saveMessage: t(\n          'You will be redirected to the new organization slug after saving'\n        ),\n      },\n      {\n        name: 'name',\n        type: 'string',\n        required: true,\n        label: t('Display Name'),\n        help: t('A human-friendly name for the organization'),\n      },\n      {\n        name: 'isEarlyAdopter',\n        type: 'boolean',\n        label: t('Early Adopter'),\n        help: tct(\"Opt-in to [link:new features] before they're released to the public\", {\n          link: (\n            <ExternalLink href=\"https://docs.sentry.io/product/accounts/early-adopter/\" />\n          ),\n        }),\n      },\n      {\n        name: 'aiSuggestedSolution',\n        type: 'boolean',\n        label: t('AI Suggested Solution'),\n        visible: ({features}) => features.has('open-ai-suggestion'),\n        help: tct(\n          'Opt-in to [link:ai suggested solution] to get AI help on how to solve an issue.',\n          {\n            link: (\n              <ExternalLink href=\"https://docs.sentry.io/product/issues/issue-details/ai-suggested-solution/\" />\n            ),\n          }\n        ),\n      },\n    ],\n  },\n\n  {\n    title: 'Membership',\n    fields: [\n      {\n        name: 'defaultRole',\n        type: 'select',\n        required: true,\n        label: t('Default Role'),\n        // seems weird to have choices in initial form data\n        choices: ({initialData} = {}) =>\n          initialData?.orgRoleList?.map((r: MemberRole) => [r.id, r.name]) ?? [],\n        help: t('The default role new members will receive'),\n        disabled: ({access}) => !access.has('org:admin'),\n      },\n      {\n        name: 'openMembership',\n        type: 'boolean',\n        required: true,\n        label: t('Open Membership'),\n        help: t('Allow organization members to freely join any team'),\n      },\n      {\n        name: 'eventsMemberAdmin',\n        type: 'boolean',\n        label: t('Let Members Delete Events'),\n        help: t(\n          'Allow members to delete events (including the delete & discard action) by granting them the `event:admin` scope.'\n        ),\n      },\n      {\n        name: 'alertsMemberWrite',\n        type: 'boolean',\n        label: t('Let Members Create and Edit Alerts'),\n        help: t(\n          'Allow members to create, edit, and delete alert rules by granting them the `alerts:write` scope.'\n        ),\n      },\n      {\n        name: 'attachmentsRole',\n        type: 'select',\n        choices: ({initialData = {}}) =>\n          initialData?.orgRoleList?.map((r: MemberRole) => [r.id, r.name]) ?? [],\n        label: t('Attachments Access'),\n        help: t(\n          'Role required to download event attachments, such as native crash reports or log files.'\n        ),\n        visible: ({features}) => features.has('event-attachments'),\n      },\n      {\n        name: 'debugFilesRole',\n        type: 'select',\n        choices: ({initialData = {}}) =>\n          initialData?.orgRoleList?.map((r: MemberRole) => [r.id, r.name]) ?? [],\n        label: t('Debug Files Access'),\n        help: t(\n          'Role required to download debug information files, proguard mappings and source maps.'\n        ),\n      },\n    ],\n  },\n];\n\nexport default formGroups;\n","/**\n * Transforms the given string to a slugified version. (e.g. \"My Project\" => \"my-project\")\n *\n * Allows only lowercase alphanumeric values, hyphens, and underscores (should match backend validation rules).\n * Normalizes special characters to a-z where applicable (accents, ligatures, etc).\n * Converts spaces to hyphens.\n */\nexport default function slugify(str: string): string {\n  return str\n    .normalize('NFKD') // Converts accents/ligatures/etc to latin alphabet\n    .toLowerCase()\n    .replace(' ', '-')\n    .replace(/[^a-z0-9-_]/g, ''); // Remove all invalid characters\n}\n","import {ReactNode} from 'react';\n\nimport Access from 'sentry/components/acl/access';\nimport {Alert} from 'sentry/components/alert';\nimport {t} from 'sentry/locale';\nimport {Scope} from 'sentry/types';\n\ntype Props = React.ComponentPropsWithoutRef<typeof Alert> & {\n  access?: Scope[];\n  message?: ReactNode;\n};\n\nfunction PermissionAlert({\n  access = ['org:write'],\n  message = t(\n    'These settings can only be edited by users with the organization owner or manager role.'\n  ),\n  ...props\n}: Props) {\n  return (\n    <Access access={access}>\n      {({hasAccess}) =>\n        !hasAccess && (\n          <Alert data-test-id=\"org-permission-alert\" type=\"warning\" showIcon {...props}>\n            {message}\n          </Alert>\n        )\n      }\n    </Access>\n  );\n}\n\nexport default PermissionAlert;\n","import {Fragment} from 'react';\nimport {RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\nimport {Location} from 'history';\nimport cloneDeep from 'lodash/cloneDeep';\n\nimport {addErrorMessage} from 'sentry/actionCreators/indicator';\nimport {updateOrganization} from 'sentry/actionCreators/organizations';\nimport Feature from 'sentry/components/acl/feature';\nimport FeatureDisabled from 'sentry/components/acl/featureDisabled';\nimport AvatarChooser from 'sentry/components/avatarChooser';\nimport DeprecatedAsyncComponent, {\n  AsyncComponentState,\n} from 'sentry/components/deprecatedAsyncComponent';\nimport Form from 'sentry/components/forms/form';\nimport JsonForm from 'sentry/components/forms/jsonForm';\nimport HookOrDefault from 'sentry/components/hookOrDefault';\nimport {Hovercard} from 'sentry/components/hovercard';\nimport Link from 'sentry/components/links/link';\nimport Tag from 'sentry/components/tag';\nimport organizationSettingsFields from 'sentry/data/forms/organizationGeneralSettings';\nimport {IconCodecov, IconLock} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport {space} from 'sentry/styles/space';\nimport type {\n  Integration,\n  Organization,\n  OrganizationAuthProvider,\n  Scope,\n} from 'sentry/types';\nimport withOrganization from 'sentry/utils/withOrganization';\n\nconst HookCodecovSettingsLink = HookOrDefault({\n  hookName: 'component:codecov-integration-settings-link',\n});\n\ninterface Props extends RouteComponentProps<{}, {}> {\n  access: Set<Scope>;\n  initialData: Organization;\n  location: Location;\n  onSave: (previous: Organization, updated: Organization) => void;\n  organization: Organization;\n}\n\ninterface State extends AsyncComponentState {\n  authProvider: OrganizationAuthProvider;\n  githubIntegrations: Integration[];\n}\n\nclass OrganizationSettingsForm extends DeprecatedAsyncComponent<Props, State> {\n  getEndpoints(): ReturnType<DeprecatedAsyncComponent['getEndpoints']> {\n    const {organization} = this.props;\n    return [\n      ['authProvider', `/organizations/${organization.slug}/auth-provider/`],\n      [\n        'githubIntegrations',\n        `/organizations/${organization.slug}/integrations/?provider_key=github`,\n      ],\n    ];\n  }\n\n  render() {\n    const {initialData, organization, onSave, access} = this.props;\n    const {authProvider, githubIntegrations} = this.state;\n    const endpoint = `/organizations/${organization.slug}/`;\n    const hasGithubIntegration = githubIntegrations\n      ? githubIntegrations.length > 0\n      : false;\n\n    const jsonFormSettings = {\n      additionalFieldProps: {hasSsoEnabled: !!authProvider},\n      features: new Set(organization.features),\n      access,\n      location: this.props.location,\n      disabled: !access.has('org:write'),\n    };\n\n    const forms = cloneDeep(organizationSettingsFields);\n    forms[0].fields = [\n      ...forms[0].fields,\n      {\n        name: 'codecovAccess',\n        type: 'boolean',\n        disabled: !organization.features.includes('codecov-integration'),\n        label: (\n          <PoweredByCodecov>\n            {t('Enable Code Coverage Insights')}{' '}\n            <Feature\n              hookName=\"feature-disabled:codecov-integration-setting\"\n              renderDisabled={p => (\n                <Hovercard\n                  body={\n                    <FeatureDisabled\n                      features={p.features}\n                      hideHelpToggle\n                      featureName={t('Codecov Coverage')}\n                    />\n                  }\n                >\n                  <Tag role=\"status\" icon={<IconLock isSolid />}>\n                    {t('disabled')}\n                  </Tag>\n                </Hovercard>\n              )}\n              features={['organizations:codecov-integration']}\n            >\n              {() => null}\n            </Feature>\n          </PoweredByCodecov>\n        ),\n        formatMessageValue: (value: boolean) => {\n          const onOff = value ? t('on') : t('off');\n          return t('Codecov access was turned %s', onOff);\n        },\n        help: (\n          <PoweredByCodecov>\n            {t('powered by')} <IconCodecov /> Codecov{' '}\n            <HookCodecovSettingsLink organization={organization} />\n          </PoweredByCodecov>\n        ),\n      },\n      {\n        name: 'githubPRBot',\n        type: 'boolean',\n        label: t('Enable Pull Request Bot'),\n        visible: ({features}) => features.has('pr-comment-bot'),\n        help: (\n          <Fragment>\n            {t(\n              'Allow Sentry to comment on pull requests about issues impacting your app.'\n            )}{' '}\n            <Link to={`/settings/${organization.slug}/integrations/github`}>\n              {t('Configure GitHub integration')}\n            </Link>\n          </Fragment>\n        ),\n        disabled: !hasGithubIntegration,\n        disabledReason: (\n          <Fragment>\n            {t('You must have a GitHub integration to enable this feature.')}\n          </Fragment>\n        ),\n      },\n    ];\n\n    return (\n      <Form\n        data-test-id=\"organization-settings\"\n        apiMethod=\"PUT\"\n        apiEndpoint={endpoint}\n        saveOnBlur\n        allowUndo\n        initialData={initialData}\n        onSubmitSuccess={(updated, _model) => {\n          // Special case for slug, need to forward to new slug\n          if (typeof onSave === 'function') {\n            onSave(initialData, updated);\n          }\n        }}\n        onSubmitError={() => addErrorMessage('Unable to save change')}\n      >\n        <JsonForm {...jsonFormSettings} forms={forms} />\n        <AvatarChooser\n          type=\"organization\"\n          allowGravatar={false}\n          endpoint={`${endpoint}avatar/`}\n          model={initialData}\n          onSave={updateOrganization}\n          disabled={!access.has('org:write')}\n        />\n      </Form>\n    );\n  }\n}\n\nexport default withOrganization(OrganizationSettingsForm);\n\nconst PoweredByCodecov = styled('div')`\n  display: flex;\n  align-items: center;\n  gap: ${space(0.5)};\n\n  & > span {\n    display: flex;\n    align-items: center;\n  }\n`;\n","import {Fragment} from 'react';\nimport {browserHistory, RouteComponentProps} from 'react-router';\n\nimport {addLoadingMessage} from 'sentry/actionCreators/indicator';\nimport {\n  changeOrganizationSlug,\n  removeAndRedirectToRemainingOrganization,\n  updateOrganization,\n} from 'sentry/actionCreators/organizations';\nimport {Button} from 'sentry/components/button';\nimport Confirm from 'sentry/components/confirm';\nimport FieldGroup from 'sentry/components/forms/fieldGroup';\nimport List from 'sentry/components/list';\nimport ListItem from 'sentry/components/list/listItem';\nimport Panel from 'sentry/components/panels/panel';\nimport PanelHeader from 'sentry/components/panels/panelHeader';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\nimport {t, tct} from 'sentry/locale';\nimport {Organization, Project} from 'sentry/types';\nimport {trackAnalytics} from 'sentry/utils/analytics';\nimport useApi from 'sentry/utils/useApi';\nimport withOrganization from 'sentry/utils/withOrganization';\nimport withProjects from 'sentry/utils/withProjects';\nimport SettingsPageHeader from 'sentry/views/settings/components/settingsPageHeader';\nimport TextBlock from 'sentry/views/settings/components/text/textBlock';\nimport PermissionAlert from 'sentry/views/settings/organization/permissionAlert';\n\nimport OrganizationSettingsForm from './organizationSettingsForm';\n\ntype Props = {\n  organization: Organization;\n  projects: Project[];\n} & RouteComponentProps<{}, {}>;\n\nfunction OrganizationGeneralSettings(props: Props) {\n  const api = useApi();\n\n  const {organization, projects} = props;\n  const access = new Set(organization.access);\n\n  const removeConfirmMessage = (\n    <Fragment>\n      <TextBlock>\n        {tct(\n          'Removing the organization, [name] is permanent and cannot be undone! Are you sure you want to continue?',\n          {\n            name: organization && <strong>{organization.name}</strong>,\n          }\n        )}\n      </TextBlock>\n\n      {!!projects.length && (\n        <Fragment>\n          <TextBlock>\n            {t('This will also remove the following associated projects:')}\n          </TextBlock>\n          <List symbol=\"bullet\" data-test-id=\"removed-projects-list\">\n            {projects.map(project => (\n              <ListItem key={project.slug}>{project.slug}</ListItem>\n            ))}\n          </List>\n        </Fragment>\n      )}\n    </Fragment>\n  );\n\n  const handleSaveForm: React.ComponentProps<\n    typeof OrganizationSettingsForm\n  >['onSave'] = (prevData: Organization, updated: Organization) => {\n    if (updated.slug && updated.slug !== prevData.slug) {\n      changeOrganizationSlug(prevData, updated);\n\n      if (updated.features.includes('customer-domains')) {\n        const {organizationUrl} = updated.links;\n        window.location.replace(`${organizationUrl}/settings/organization/`);\n      } else {\n        browserHistory.replace(`/settings/${updated.slug}/`);\n      }\n    } else {\n      if (prevData.codecovAccess !== updated.codecovAccess) {\n        trackAnalytics('organization_settings.codecov_access_updated', {\n          organization: updated,\n          has_access: updated.codecovAccess,\n        });\n      }\n\n      // This will update OrganizationStore (as well as OrganizationsStore\n      // which is slightly incorrect because it has summaries vs a detailed org)\n      updateOrganization(updated);\n    }\n  };\n\n  const handleConfirmRemoveOrg = () => {\n    if (!organization) {\n      return;\n    }\n\n    addLoadingMessage();\n    removeAndRedirectToRemainingOrganization(api, {\n      orgId: organization.slug,\n      successMessage: `${organization.name} is queued for deletion.`,\n      errorMessage: `Error removing the ${organization.name} organization`,\n    });\n  };\n\n  return (\n    <Fragment>\n      <SentryDocumentTitle title={t('General Settings')} orgSlug={organization.slug} />\n      <div>\n        <SettingsPageHeader title={t('Organization Settings')} />\n        <PermissionAlert />\n\n        <OrganizationSettingsForm\n          {...props}\n          initialData={organization}\n          access={access}\n          onSave={handleSaveForm}\n        />\n\n        {access.has('org:admin') && !organization.isDefault && (\n          <Panel>\n            <PanelHeader>{t('Remove Organization')}</PanelHeader>\n            <FieldGroup\n              label={t('Remove Organization')}\n              help={t(\n                'Removing this organization will delete all data including projects and their associated events.'\n              )}\n            >\n              <div>\n                <Confirm\n                  priority=\"danger\"\n                  confirmText={t('Remove Organization')}\n                  message={removeConfirmMessage}\n                  onConfirm={handleConfirmRemoveOrg}\n                >\n                  <Button priority=\"danger\">{t('Remove Organization')}</Button>\n                </Confirm>\n              </div>\n            </FieldGroup>\n          </Panel>\n        )}\n      </div>\n    </Fragment>\n  );\n}\n\nexport default withProjects(withOrganization(OrganizationGeneralSettings));\n"],"names":["route","title","t","fields","name","type","required","label","help","transformInput","slugify","saveOnBlur","saveMessageAlertType","saveMessage","tct","link","_jsx","ExternalLink","href","visible","_ref","features","has","choices","initialData","arguments","length","undefined","orgRoleList","map","r","id","disabled","_ref2","access","_ref3","_ref4","_ref5","str","normalize","toLowerCase","replace","PermissionAlert","message","props","Access","children","hasAccess","Alert","showIcon","displayName","HookCodecovSettingsLink","HookOrDefault","hookName","OrganizationSettingsForm","DeprecatedAsyncComponent","getEndpoints","organization","this","slug","render","onSave","authProvider","githubIntegrations","state","endpoint","hasGithubIntegration","jsonFormSettings","additionalFieldProps","hasSsoEnabled","Set","location","forms","cloneDeep","organizationSettingsFields","includes","_jsxs","PoweredByCodecov","Feature","renderDisabled","p","Hovercard","body","FeatureDisabled","hideHelpToggle","featureName","Tag","role","icon","IconLock","isSolid","formatMessageValue","value","onOff","IconCodecov","Fragment","Link","to","disabledReason","Form","apiMethod","apiEndpoint","allowUndo","onSubmitSuccess","updated","_model","onSubmitError","addErrorMessage","JsonForm","AvatarChooser","allowGravatar","model","updateOrganization","withOrganization","_styled","target","space","OrganizationGeneralSettings","api","useApi","projects","removeConfirmMessage","TextBlock","List","symbol","project","ListItem","SentryDocumentTitle","orgSlug","SettingsPageHeader","handleSaveForm","prevData","changeOrganizationSlug","organizationUrl","links","window","browserHistory","codecovAccess","trackAnalytics","has_access","isDefault","Panel","PanelHeader","FieldGroup","Confirm","priority","confirmText","onConfirm","handleConfirmRemoveOrg","addLoadingMessage","removeAndRedirectToRemainingOrganization","orgId","successMessage","errorMessage","Button","withProjects"],"sourceRoot":""}