"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_projectInstall_platformOrIntegration_tsx"],{"./app/views/projectInstall/platformOrIntegration.tsx":(t,e,o)=>{o.r(e),o.d(e,{default:()=>Tt});var i=o("../node_modules/query-string/index.js"),n=o("./app/components/onboarding/onboardingContext.tsx"),r=o("./app/utils/integrationUtil.tsx"),a=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=o("./app/components/layouts/thirds.tsx"),l=o("./app/styles/space.tsx");const d=(0,a.Z)(s.T3,{target:"e1bbzr60"})("background:",(t=>t.theme.background),";padding-top:",(0,l.D)(3),";");d.defaultProps={withPadding:!0};const c=d;o("../node_modules/core-js/modules/es.array.push.js");var p=o("../node_modules/react/index.js"),u=o("../node_modules/lodash/omit.js"),g=o.n(u),m=o("./app/actionCreators/projects.tsx"),h=o("./app/components/acl/feature.tsx"),f=o("./app/components/alert.tsx"),x=o("./app/components/button.tsx"),Z=o("./app/components/buttonBar.tsx"),y=o("./app/components/confirm.tsx"),j=o("./app/components/errors/notFound.tsx"),b=o("./app/components/hookOrDefault.tsx"),w=o("./app/components/links/externalLink.tsx"),v=o("./app/components/loadingError.tsx"),k=o("./app/components/loadingIndicator.tsx"),_=o("./app/components/onboarding/documentationWrapper.tsx"),z=o("./app/components/onboarding/footer.tsx"),S=o("./app/components/onboarding/gettingStartedDoc/sdkDocumentation.tsx"),D=o("./app/components/onboarding/useRecentCreatedProject.tsx"),I=o("./app/components/sentryDocumentTitle.tsx"),C=o("./app/data/platformCategories.tsx"),P=o("./app/data/platforms.tsx"),B=o("./app/icons/index.tsx"),$=o("./app/locale.tsx"),T=o("./app/stores/configStore.tsx"),X=o("./app/utils/analytics.tsx"),E=o("./app/utils/handleXhrErrorResponse.tsx"),N=o("./app/utils/queryClient.tsx"),F=o("./app/utils/useApi.tsx"),L=o("./app/utils/useOrganization.tsx"),q=o("./app/utils/useProjects.tsx"),O=o("./app/utils/withDomainRequired.tsx"),A=o("./app/views/onboarding/setupDocsLoader.tsx"),G=o("./app/views/projects/gettingStartedWithProjectContext.tsx"),M=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const R=(0,b.Z)({hookName:"component:product-unavailable-cta"});function W(t){let{organization:e,projectSlug:o,platform:i}=t;const n=(0,F.Z)(),[r,a]=(0,p.useState)(!0),[s,l]=(0,p.useState)(!1),[d,c]=(0,p.useState)(""),u=(0,p.useCallback)((async()=>{a(!0);try{const{html:t}=await(0,m.iC)({api:n,orgSlug:e.slug,projectSlug:o,platform:i.key});c(t),window.scrollTo(0,0)}catch(t){l(t)}a(!1)}),[n,e.slug,o,i.key]);return(0,p.useEffect)((()=>{u()}),[u]),(0,M.BX)("div",{children:[(0,M.tZ)(f.bZ,{type:"info",showIcon:!0,children:(0,$._N)("\n           This is a quick getting started guide. For in-depth instructions\n           on integrating Sentry with [platform], view\n           [docLink:our complete documentation].",{platform:i.name,docLink:(0,M.tZ)(w.Z,{href:i.link??void 0})})}),r?(0,M.tZ)(k.Z,{}):s?(0,M.tZ)(v.Z,{onRetry:u}):(0,M.BX)(p.Fragment,{children:[(0,M.tZ)(I.Z,{title:`${(0,$.t)("Configure")} ${i.name}`,projectSlug:o}),(0,M.tZ)(_.l,{dangerouslySetInnerHTML:{__html:d}})]})]})}function H(t){let{location:e,params:o,route:i,router:n}=t;const r=(0,L.Z)(),a=(0,F.Z)(),s=(0,p.useContext)(G.p),l=T.Z.get("isSelfHosted"),{projects:d,initiallyLoaded:c}=(0,q.Z)({slugs:[o.projectId],orgId:r.slug}),u=!c,f=u?void 0:d.find((t=>t.slug===o.projectId)),b=f?.platform??"other",w=P.Z.find((t=>t.id===b)),[v,k]=(0,p.useState)("javascript"===w?.id),_=(0,p.useMemo)((()=>e.query.product??[]),[e.query.product]),{data:I,isLoading:H,isError:Y}=(0,N.WE)([`/projects/${r.slug}/${f?.slug}/rules/`],{enabled:!!f?.slug,staleTime:0});(0,p.useEffect)((()=>{k("javascript"===w?.id)}),[w?.id]),(0,p.useEffect)((()=>{if(!f||H||Y)return;if(s.project?.id===f.id)return;const t=Object.keys(P.Z).find((t=>P.Z[t].id===f.platform));t&&s.setProject({id:f.id,name:f.name,teamSlug:f.team?.slug,alertRules:I,platform:{...g()(P.Z[t],"id"),key:P.Z[t].id}})}),[s,f,I,H,Y]);const J=!!r?.features.includes("onboarding-heartbeat-footer"),Q=!!r?.features.includes("onboarding-project-deletion-on-back-click"),tt=!!r?.features.includes("getting-started-doc-with-product-selection"),et=(0,D.X)({orgSlug:r.slug,projectSlug:f?.slug}),ot=Q&&et&&!1===et.firstError&&!1===et.firstTransaction&&!1===et.hasReplays&&!1===et.hasSessions&&!1===et.olderThanOneHour,it=P.Z.find((t=>t.id===b)),nt={key:b,id:it?.id,name:it?.name,link:it?.link},rt=(0,p.useCallback)((()=>{f?.slug&&n.push((0,O.D)(`/organizations/${r.slug}/projects/${f.slug}/getting-started/`))}),[r.slug,f?.slug,n]),at=(0,p.useCallback)((async()=>{if(et){if((0,X.Gi)("project_creation.back_button_clicked",{organization:r}),ot){(0,X.Gi)("project_creation.data_removal_modal_confirm_button_clicked",{organization:r,platform:et.slug,project_id:et.id});try{await(0,m.rR)({api:a,orgSlug:r.slug,projectSlug:et.slug,origin:"getting_started"}),(0,X.Gi)("project_creation.data_removed",{organization:r,date_created:et.dateCreated,platform:et.slug,project_id:et.id})}catch(t){(0,E.X)("Unable to delete project in project creation",t)}}n.replace((0,O.D)(`/organizations/${r.slug}/projects/new/?referrer=getting-started&project=${et.id}`))}}),[a,et,r,ot,n]),st=(0,p.useCallback)((()=>{k(!1),f?.id&&w&&(0,X.Gi)("onboarding.js_loader_npm_docs_shown",{organization:r,platform:w.id,project_id:f?.id})}),[r,w,f?.id]);if((0,p.useEffect)((()=>{nt.key&&"other"!==nt.key||rt()}),[nt.key,rt]),!f)return null;if(!nt.id)return(0,M.tZ)(j.Z,{});const lt=`/organizations/${r.slug}/issues/`,dt=`/organizations/${r.slug}/performance/`,ct=C.Sv.includes(nt.id),pt=window.location.href.indexOf("getting-started")>0,ut=tt&&("javascript"===nt.key||!!nt.key.match("^javascript-([A-Za-z]+)$"));return(0,M.BX)(p.Fragment,{children:[!l&&ut&&(0,M.tZ)(R,{organization:r}),(0,M.BX)(U,{children:[(0,M.tZ)("h2",{children:(0,$.t)("Configure %(platform)s SDK",{platform:nt.name})}),(0,M.BX)(Z.ZP,{gap:1,children:[(0,M.tZ)(y.Z,{bypass:!ot,message:(0,$.t)("Hey, just a heads up - we haven't received any data for this SDK yet and by going back all changes will be discarded. Are you sure you want to head back?"),priority:"danger",confirmText:(0,$.t)("Yes I'm sure"),onConfirm:at,onClose:()=>{et&&(0,X.Gi)("project_creation.data_removal_modal_dismissed",{organization:r,platform:et.slug,project_id:et.id})},onRender:()=>{et&&(0,X.Gi)("project_creation.data_removal_modal_rendered",{organization:r,platform:et.slug,project_id:et.id})},children:(0,M.tZ)(x.zx,{icon:(0,M.tZ)(B.g6,{direction:"left",size:"sm"}),size:"sm",children:(0,$.t)("Back to Platform Selection")})}),(0,M.tZ)(x.zx,{size:"sm",href:nt.link??void 0,external:!0,children:(0,$.t)("Full Documentation")})]})]}),w&&v?(0,M.tZ)(A.N,{organization:r,project:f,location:e,platform:w.id,close:st}):w&&S.g.includes(b)?(0,M.tZ)(S.w,{platform:w,orgSlug:r.slug,projectSlug:f.slug,activeProductSelection:_}):(0,M.tZ)(W,{organization:r,projectSlug:f.slug,platform:nt}),(0,M.BX)("div",{children:[pt&&ct&&(0,M.tZ)(h.Z,{features:["performance-view"],hookName:"feature-disabled:performance-new-project",children:t=>{let{hasFeature:e}=t;return e?null:(0,M.tZ)(V,{type:"info",showIcon:!0,children:(0,$.t)("Your selected platform supports performance, but your organization does not have performance enabled.")})}}),pt&&J?(0,M.tZ)(z.$,{projectSlug:o.projectId,projectId:f?.id,route:i,router:n,location:e}):(0,M.BX)(K,{gap:1,children:[(0,M.tZ)(x.zx,{priority:"primary",busy:u,to:{pathname:lt,query:f?.id,hash:"#welcome"},children:(0,$.t)("Take me to Issues")}),(0,M.tZ)(x.zx,{busy:u,to:{pathname:dt,query:f?.id},children:(0,$.t)("Take me to Performance")})]})]})]})}W.displayName="SetUpGeneralSdkDoc",H.displayName="ProjectInstallPlatform";const K=(0,a.Z)(Z.ZP,{target:"e1f5kh8r2"})("margin-top:",(0,l.D)(3),";width:max-content;@media (max-width: ",(t=>t.theme.breakpoints.small),"){width:auto;grid-row-gap:",(0,l.D)(1),";grid-auto-flow:row;}"),U=(0,a.Z)("div",{target:"e1f5kh8r1"})("display:flex;justify-content:space-between;margin-bottom:",(0,l.D)(3),";h2{margin:0;}@media (max-width: ",(t=>t.theme.breakpoints.small),"){flex-direction:column;align-items:flex-start;h2{margin-bottom:",(0,l.D)(2),";}}"),V=(0,a.Z)(f.bZ,{target:"e1f5kh8r0"})("margin-top:",(0,l.D)(2),";");var Y=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),J=o("../node_modules/react-router/es/index.js"),Q=o("./app/components/deprecatedAsyncComponent.tsx"),tt=o("./app/utils/withOrganization.tsx"),et=o("./app/views/onboarding/components/integrations/addInstallationInstructions.tsx"),ot=o("./app/views/onboarding/components/integrations/postInstallCodeSnippet.tsx"),it=o("./app/views/settings/organizationIntegrations/addIntegrationButton.tsx"),nt=o("../node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs"),rt=o("../node_modules/framer-motion/dist/es/render/dom/motion.mjs"),at=o("./app/styles/pulsingIndicator.tsx"),st=o("./app/utils/eventWaiter.tsx"),lt=o("./app/utils/testableTransition.tsx");function dt(t){let{children:e,...o}=t;return(0,M.tZ)(st.Z,{...o,children:t=>{let{firstIssue:i}=t;return e({indicator:(0,M.tZ)(ct,{firstIssue:i,...o}),firstEventButton:(0,M.tZ)(x.zx,{title:(0,$.t)("You'll need to send your first error to continue"),tooltipProps:{disabled:!!i},disabled:!i,priority:"primary",onClick:()=>(0,X.Gi)("growth.onboarding_take_to_error",{organization:o.organization}),to:`/organizations/${o.organization.slug}/issues/${i&&!0!==i&&"id"in i?`${i.id}/`:""}?referrer=onboarding-first-event-indicator`,children:(0,$.t)("Take me to my error")})})}})}function ct(t){let{firstIssue:e}=t;return(0,M.tZ)(pt,{children:(0,M.tZ)(nt.M,{children:e?(0,M.tZ)(mt,{},"received"):(0,M.tZ)(gt,{},"waiting")})})}dt.displayName="FirstEventIndicator",ct.displayName="Indicator";const pt=(0,a.Z)("div",{target:"e10tfv734"})({name:"qu0prw",styles:"display:grid;grid-template-columns:1fr;justify-content:right"}),ut=(0,a.Z)(rt.E.div,{target:"e10tfv733"})("display:grid;grid-template-columns:1fr max-content;gap:",(0,l.D)(1),";align-items:center;font-size:",(t=>t.theme.fontSizeMedium),";grid-column:1;grid-row:1;");function gt(t){return(0,M.BX)(ut,{...t,children:[(0,M.tZ)(ft,{children:(0,$.t)("Waiting to receive first event to continue")}),(0,M.tZ)(xt,{})]})}function mt(t){return(0,M.BX)(ut,{...t,children:[(0,M.tZ)(ft,{children:(0,$.t)("Event was received!")}),(0,M.tZ)(Zt,{})]})}ut.defaultProps={initial:"initial",animate:"animate",exit:"exit",variants:{initial:{opacity:0,y:-10},animate:{opacity:1,y:0,transition:(0,lt.Z)({when:"beforeChildren",staggerChildren:.35})},exit:{opacity:0,y:10}}},gt.displayName="Waiting",mt.displayName="Success";const ht={initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:10}},ft=(0,a.Z)(rt.E.div,{target:"e10tfv732"})("");ft.defaultProps={variants:ht,transition:(0,lt.Z)()};const xt=(0,a.Z)(rt.E.div,{target:"e10tfv731"})("margin:0 6px;",at.Z,";");xt.defaultProps={variants:ht,transition:(0,lt.Z)()};const Zt=(0,a.Z)(B.DL,{target:"e10tfv730"})("color:#fff;background:",(t=>t.theme.green300),";border-radius:50%;padding:3px;margin:0 ",(0,l.D)(.25),";");Zt.defaultProps={size:"sm"};const yt=dt;var jt=o("./app/views/onboarding/createSampleEventButton.tsx");function bt(t){let{organization:e,project:o,docsLink:i,docsOnClick:n}=t;return(0,M.BX)(p.Fragment,{children:[(0,M.tZ)(yt,{organization:e,project:o,eventType:"error",children:t=>{let{indicator:e,firstEventButton:o}=t;return(0,M.BX)(wt,{children:[(0,M.BX)(kt,{gap:2,children:[o,(0,M.tZ)(x.zx,{external:!0,href:i,onClick:n,children:(0,$.t)("View full documentation")})]}),e]})}}),(0,M.tZ)(vt,{children:(0,$._N)("Just want to poke around before getting too cozy with the SDK? [sample:View a sample event for this SDK] or [skip:finish setup later].",{sample:(0,M.tZ)(jt.Z,{"aria-label":"View a sample event",project:o,source:"onboarding",priority:"link"}),skip:(0,M.tZ)(x.zx,{priority:"link",href:"/","aria-label":(0,$.t)("Finish setup later")})})})]})}bt.displayName="FirstEventFooter";const wt=(0,a.Z)("div",{target:"eehhgoe2"})("display:flex;justify-content:space-between;margin:",(0,l.D)(2)," 0;margin-top:",(0,l.D)(4),";"),vt=(0,a.Z)("p",{target:"eehhgoe1"})("color:",(t=>t.theme.subText),";font-size:",(t=>t.theme.fontSizeMedium),";margin:0;max-width:500px;"),kt=(0,a.Z)(Z.ZP,{target:"eehhgoe0"})({name:"14dyr8n",styles:"display:inline-grid;justify-self:start"});function _t(t){let{gettingStartedLink:e,docsLink:o}=t;return(0,M.BX)(Z.ZP,{gap:1,children:[(0,M.tZ)(x.zx,{size:"sm",icon:(0,M.tZ)(B.g6,{size:"xs",direction:"left"}),to:e,children:(0,$.t)("Back")}),(0,M.tZ)(x.zx,{size:"sm",href:o,external:!0,children:(0,$.t)("Full Documentation")})]})}_t.displayName="PlatformHeaderButtonBar";class zt extends Q.Z{constructor(){super(...arguments),(0,Y.Z)(this,"handleFullDocsClick",(()=>{const{organization:t}=this.props;(0,X.Gi)("growth.onboarding_view_full_docs",{organization:t})})),(0,Y.Z)(this,"handleAddIntegration",(()=>{this.setState({installed:!0})})),(0,Y.Z)(this,"trackSwitchToManual",(()=>{const{organization:t,integrationSlug:e}=this.props;(0,r.Db)("integrations.switch_manual_sdk_setup",{integration_type:"first_party",integration:e,view:"project_creation",organization:t})}))}getDefaultState(){return{...super.getDefaultState(),installed:!1,integrations:{providers:[]},project:null}}componentDidMount(){super.componentDidMount(),window.scrollTo(0,0);const{platform:t}=this.props.params;t&&"other"!==t||this.redirectToNeutralDocs()}get provider(){const{providers:t}=this.state.integrations;return t.length?t[0]:null}getEndpoints(){const{organization:t,integrationSlug:e,params:o}=this.props;return e?[["integrations",`/organizations/${t.slug}/config/integrations/?provider_key=${e}`],["project",`/projects/${t.slug}/${o.projectId}/`]]:[]}redirectToNeutralDocs(){const{organization:t}=this.props,{projectId:e}=this.props.params,o=`/organizations/${t.slug}/projects/${e}/getting-started/`;J.browserHistory.push((0,O.D)(o))}render(){const{organization:t,params:e}=this.props,{installed:o,project:i}=this.state,{projectId:n,platform:r}=e,a=this.provider,s=P.Z.find((t=>t.id===r));if(!a||!s||!i)return null;const l=`/organizations/${t.slug}/projects/${n}/getting-started/`,d="https://docs.sentry.io/product/integrations/cloud-monitoring/aws-lambda/";return(0,M.tZ)(It,{children:(0,M.BX)(Dt,{children:[(0,M.tZ)(Pt,{children:(0,$.t)("Automatically instrument %s",s.name)}),(0,M.tZ)(Ct,{children:(0,M.tZ)(_t,{gettingStartedLink:l,docsLink:d})}),o?(0,M.BX)(p.Fragment,{children:[(0,M.tZ)(ot.Z,{provider:a}),(0,M.tZ)(bt,{project:i,organization:t,docsLink:d,docsOnClick:this.handleFullDocsClick})]}):(0,M.BX)(p.Fragment,{children:[(0,M.tZ)(et.Z,{}),(0,M.BX)(St,{gap:1,children:[(0,M.tZ)(it.w,{provider:a,onAddIntegration:this.handleAddIntegration,organization:t,priority:"primary",size:"sm",analyticsParams:{view:"project_creation",already_installed:!1},modalParams:{projectId:i.id},"aria-label":(0,$.t)("Add integration")}),(0,M.tZ)(x.zx,{size:"sm",to:{pathname:window.location.pathname,query:{manual:"1"}},onClick:this.trackSwitchToManual,children:(0,$.t)("Manual Setup")})]})]})]})})}}zt.displayName="PlatformIntegrationSetup";const St=(0,a.Z)(Z.ZP,{target:"e1o04xl64"})("margin-top:",(0,l.D)(3),";width:max-content;@media (max-width: ",(t=>t.theme.breakpoints.small),"){width:auto;grid-row-gap:",(0,l.D)(1),";grid-auto-flow:row;}"),Dt=(0,a.Z)("div",{target:"e1o04xl63"})({name:"1ki15kq",styles:"max-width:850px"}),It=(0,a.Z)("div",{target:"e1o04xl62"})({name:"10ebfcx",styles:"display:flex;flex-direction:column;align-items:center;margin-top:50px"}),Ct=(0,a.Z)("div",{target:"e1o04xl61"})("width:min-content;margin-bottom:",(0,l.D)(3),";"),Pt=(0,a.Z)("h2",{target:"e1o04xl60"})("margin:0;margin-bottom:",(0,l.D)(2),";"),Bt=(0,tt.Z)(zt);function $t(t){const e=i.parse(window.location.search),{platform:o}=t.params,a=o&&r.C$[o];return a&&"1"!==e.manual?(0,M.tZ)(Bt,{integrationSlug:a,...t}):(0,M.tZ)(n.P,{children:(0,M.tZ)(c,{children:(0,M.tZ)(H,{...t})})})}$t.displayName="PlatformOrIntegration";const Tt=$t},"./app/views/projects/gettingStartedWithProjectContext.tsx":(t,e,o)=>{o.d(e,{p:()=>a,x:()=>s});var i=o("../node_modules/react/index.js"),n=o("./app/utils/useSessionStorage.tsx"),r=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,i.createContext)({project:void 0,setProject:()=>{}});function s(t){let{children:e,project:o}=t;const[s,l]=(0,n.X)("getting-started-with-project",{project:o}),d=(0,i.useCallback)((t=>{l({project:t})}),[l]);return(0,r.tZ)(a.Provider,{value:{project:s.project,setProject:d},children:e})}s.displayName="GettingStartedWithProjectContextProvider"}}]);
//# sourceMappingURL=../sourcemaps/app_views_projectInstall_platformOrIntegration_tsx.e80b0b5a45b98e586a8e6c7ab9b76eaf.js.map