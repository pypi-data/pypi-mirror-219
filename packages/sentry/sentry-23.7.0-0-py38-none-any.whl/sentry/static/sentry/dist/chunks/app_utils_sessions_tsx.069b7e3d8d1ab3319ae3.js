"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_sessions_tsx"],{"./app/utils/sessions.tsx":(e,t,r)=>{r.d(t,{BN:()=>f,FS:()=>S,Lv:()=>w,Pn:()=>m,SU:()=>E,U5:()=>O,VH:()=>R,Xz:()=>H,Y5:()=>v,hD:()=>y,iy:()=>N,sA:()=>A,wt:()=>g}),r("../node_modules/core-js/modules/es.array.push.js");var s=r("../node_modules/lodash/compact.js"),n=r.n(s),o=r("../node_modules/lodash/mean.js"),a=r.n(o),i=r("../node_modules/moment/moment.js"),l=r.n(i),d=r("./app/components/charts/utils.tsx"),u=r("./app/types/index.tsx"),c=r("./app/utils.tsx"),h=r("./app/views/releases/utils/index.tsx"),p=r("./app/views/releases/utils/sessionTerm.tsx");const R=10;function A(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((t,r)=>t+r.totals[e]),0)}function E(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((r,s)=>r+s.series[e][t]),0)}function m(){const e=f(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>1?arguments[1]:void 0,u.$y.CRASHED);return(0,c.ri)(e)?(0,h.Mf)(100-e):null}function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const r=Array((arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).length).fill(0);return e.map((e=>e.series[t])).forEach((e=>{e.forEach(((e,t)=>r[t]+=e))})),r}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;const s=A(e,t),n=A(e.filter((e=>{let{by:t}=e;return t["session.status"]===r})),t);return(0,c.ri)(s)&&0!==s?(0,c.aQ)(n??0,s??0):null}function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return n()(t.map(((t,s)=>{const n=e.reduce(((e,t)=>e+(t.series[r]?.[s]??0)),0),o=e.find((e=>e.by["session.status"]===u.$y.CRASHED))?.series[r]?.[s]??0,a=(0,c.aQ)(o,n);return 0===n?null:{name:t,value:(0,h.Mf)(100-a)}})))}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return n()(t.map(((t,n)=>{const o=e.reduce(((e,t)=>e+t.series[r][n]),0),a=e.find((e=>e.by["session.status"]===s))?.series[r][n]??0,i=(0,c.aQ)(a,o);return 0===o?null:{name:t,value:(0,h.r)(i)}})))}function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>3?arguments[3]:void 0;return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).map(((s,n)=>{const o=e.reduce(((e,t)=>e+(t.series[r]?.[n]??0)),0),a=t.reduce(((e,t)=>e+(t.series[r]?.[n]??0)),0),i=(0,c.aQ)(o,a);return{name:s,value:Math.round(i)}}))}function N(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).map(((r,s)=>({name:r,value:t?.series[e][s]??0})))}function w(e){const t=e.charts.getColorPalette(14);return{[u.$y.HEALTHY]:{seriesName:p.U1.healthy,data:[],color:e.green300,areaStyle:{color:e.green300,opacity:1},lineStyle:{opacity:0,width:.4}},[u.$y.ERRORED]:{seriesName:p.U1.errored,data:[],color:t[12],areaStyle:{color:t[12],opacity:1},lineStyle:{opacity:0,width:.4}},[u.$y.ABNORMAL]:{seriesName:p.U1.abnormal,data:[],color:t[15],areaStyle:{color:t[15],opacity:1},lineStyle:{opacity:0,width:.4}},[u.$y.CRASHED]:{seriesName:p.U1.crashed,data:[],color:e.red300,areaStyle:{color:e.red300,opacity:1},lineStyle:{opacity:0,width:.4}}}}function H(e){let{highFidelity:t,dailyInterval:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=(0,d.Nm)(e);return l()(e.start).isSameOrBefore(l()().subtract(30,"days"))&&(t=!1),!0===r&&s>d.w3||s>=d.Zn?"1d":s>=d.B8?"4h":s>=d.aC?"1h":t?s<=R?"10s":s<=30?"1m":"5m":"1h"}function O(e,t,r){if(!t||!r)return e;const s=[],n=e.intervals.filter(((e,n)=>{const o=l().utc(e).isBetween(l().utc(t),l().utc(r),void 0,"[]");return o&&s.push(n),o})),o=e.groups.map((e=>{const t={},r={};return Object.keys(e.series).forEach((n=>{r[n]=0,t[n]=e.series[n].filter(((e,t)=>{const o=s.includes(t);return o&&(r[n]=(r[n]??0)+e),o})),n.startsWith("p50")&&(r[n]=a()(t[n])),n.startsWith("count_unique")&&(r[n]=e.totals[n])})),{...e,series:t,totals:r}}));return{start:n[0],end:n[n.length-1],query:e.query,intervals:n,groups:o}}},"./app/views/releases/utils/index.tsx":(e,t,r)=>{r.d(t,{C8:()=>T,EB:()=>x,G$:()=>N,Jl:()=>b,Mf:()=>S,O7:()=>C,PS:()=>w,TB:()=>O,eY:()=>H,hf:()=>f,me:()=>F,r:()=>y,rF:()=>D,zB:()=>v});var s=r("../node_modules/lodash/pick.js"),n=r.n(s),o=r("../node_modules/lodash/round.js"),a=r.n(o),i=r("../node_modules/moment/moment.js"),l=r.n(i),d=r("./app/components/links/externalLink.tsx"),u=r("./app/components/organizations/pageFilters/parse.tsx"),c=r("./app/constants/pageFilters.tsx"),h=r("./app/data/platformCategories.tsx"),p=r("./app/locale.tsx"),R=r("./app/types/index.tsx"),A=r("./app/utils.tsx"),E=r("./app/utils/tokenizeSearch.tsx"),m=r("./app/views/issueList/utils.tsx"),g=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const f=95,S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const s=a()(e,e>t?r:0);return 100===s&&e<100?Math.floor(e*Math.pow(10,r))/Math.pow(10,r):s},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return isNaN(e)?"â€•":s&&e<1&&e>0?"<1%":`${S(e,t,r).toLocaleString()}%`},y=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return a()(t?Math.abs(e):e,3)},N=function(e){return`${y(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]).toLocaleString()}%`},w=(e,t,r)=>({pathname:`/organizations/${e}/issues/`,query:{project:t,statsPeriod:void 0,start:void 0,end:void 0,query:new E.MY([`firstRelease:${r}`]).formatString(),sort:m.qh.FREQ}}),H=function(e,t,r){return{pathname:`/organizations/${e}/issues/`,query:{...arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},project:t,query:new E.MY([`release:${r}`,"error.unhandled:true"]).formatString(),sort:m.qh.FREQ}}},O=function(e,t,r){return{pathname:`/organizations/${e}/issues/`,query:{...arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},project:t,query:new E.MY([`release:${r}`,"error.handled:true"]).formatString(),sort:m.qh.FREQ}}},D=e=>e.status===R.dE.ARCHIVED;function T(e){const t=l()().subtract(90,"days"),{lastEvent:r,currentProjectMeta:s,dateCreated:n}=e||{},{sessionsUpperBound:o}=s||{};let a="normal",i=l()(n).startOf("minute"),d=l()((l()(o).isAfter(r)?o:r)??void 0).endOf("minute");return l()(i).isSame(d,"minute")&&(d=l()(d).add(1,"minutes")),i.isBefore(t)&&(i=t,a="clamped",(d.isBefore(i)||!(0,A.ri)(o)&&!(0,A.ri)(r))&&(d=l()(),a="ancient")),{type:a,releaseStart:i.utc().format(),releaseEnd:d.utc().format()}}function C(e){let{location:t,releaseBounds:r}=e;const s=(0,u.fK)(n()(t.query,[...Object.values(c.nF),...Object.values(c.V),"cursor"]),{allowAbsolutePageDatetime:!0,allowEmptyPeriod:!0});return Object.keys(s).some((e=>[c.nF.START,c.nF.END,c.nF.UTC,c.nF.PERIOD].includes(e)))||(s[c.nF.START]=r.releaseStart,s[c.nF.END]=r.releaseEnd),s}const _=(0,g.tZ)(d.Z,{href:"https://docs.sentry.io/product/releases/health/#adoption-stages"}),x={low_adoption:{name:(0,p.t)("Low Adoption"),tooltipTitle:(0,p._N)("This release has a low percentage of sessions compared to other releases in this project. [link:Learn more]",{link:_}),type:"warning"},adopted:{name:(0,p.t)("Adopted"),tooltipTitle:(0,p._N)("This release has a high percentage of sessions compared to other releases in this project. [link:Learn more]",{link:_}),type:"success"},replaced:{name:(0,p.t)("Replaced"),tooltipTitle:(0,p._N)("This release was previously Adopted, but now has a lower level of sessions compared to other releases in this project. [link:Learn more]",{link:_}),type:"default"}},b=e=>[...h.ai,...h.gv].includes(e);function F(e){return`release:"${e.replace(/"/g,'\\"')}"`}},"./app/views/releases/utils/sessionTerm.tsx":(e,t,r)=>{r.d(t,{RE:()=>d,U1:()=>o,_k:()=>n,w0:()=>a});var s=r("./app/locale.tsx");let n;!function(e){e.CRASHES="crashes",e.CRASHED="crashed",e.ABNORMAL="abnormal",e.CRASH_FREE="crashFree",e.CRASH_FREE_USERS="crash-free-users",e.CRASH_FREE_SESSIONS="crash-free-sessions",e.HEALTHY="healthy",e.ERRORED="errored",e.UNHANDLED="unhandled",e.STABILITY="stability",e.ADOPTION="adoption",e.ANR_RATE="anr-rate",e.FOREGROUND_ANR_RATE="foreground-anr-rate"}(n||(n={}));const o={[n.CRASHES]:(0,s.t)("Crashes"),[n.CRASHED]:(0,s.t)("Crashed"),[n.ABNORMAL]:(0,s.t)("Abnormal"),[n.CRASH_FREE_USERS]:(0,s.t)("Crash Free Users"),[n.CRASH_FREE_SESSIONS]:(0,s.t)("Crash Free Sessions"),[n.HEALTHY]:(0,s.t)("Healthy"),[n.ERRORED]:(0,s.t)("Errored"),[n.UNHANDLED]:(0,s.t)("Unhandled"),[n.ADOPTION]:(0,s.t)("Adoption"),[n.ANR_RATE]:(0,s.t)("ANR Rate"),[n.FOREGROUND_ANR_RATE]:(0,s.t)("Foreground ANR Rate"),otherCrashed:(0,s.t)("Other Crashed"),otherAbnormal:(0,s.t)("Other Abnormal"),otherErrored:(0,s.t)("Other Errored"),otherHealthy:(0,s.t)("Other Healthy"),otherCrashFreeUsers:(0,s.t)("Other Crash Free Users"),otherCrashFreeSessions:(0,s.t)("Other Crash Free Sessions"),otherReleases:(0,s.t)("Other Releases")},a={[n.CRASHES]:(0,s.t)("Number of sessions with a crashed state"),[n.CRASH_FREE]:(0,s.t)("Percentage of sessions/users who did not experience a crash."),[n.CRASH_FREE_USERS]:(0,s.t)("Percentage of unique users with non-crashed sessions"),[n.CRASH_FREE_SESSIONS]:(0,s.t)("Percentage of non-crashed sessions"),[n.STABILITY]:(0,s.t)("The percentage of crash free sessions."),[n.ADOPTION]:(0,s.t)("Adoption compares the sessions or users of a release with the total sessions or users for this project in the last 24 hours.")},i={[n.CRASHED]:(0,s.t)("The process was terminated due to an unhandled exception or a request to the server that ended with an error"),[n.CRASH_FREE_SESSIONS]:(0,s.t)("Percentage of non-crashed sessions"),[n.ABNORMAL]:(0,s.t)("An unknown session exit. Like due to loss of power or killed by the operating system"),[n.HEALTHY]:(0,s.t)("A session without errors"),[n.ERRORED]:(0,s.t)("A session with errors"),[n.UNHANDLED]:(0,s.t)("Not handled by user code")},l={crashed:(0,s.t)("The application crashed with a hard crash (eg. segfault)"),[n.ABNORMAL]:(0,s.t)("The application did not properly end the session, for example, due to force-quit"),[n.HEALTHY]:(0,s.t)("The application exited normally and did not observe any errors"),[n.ERRORED]:(0,s.t)("The application exited normally but observed error events while running"),[n.UNHANDLED]:(0,s.t)("The application crashed with a hard crash")};function d(e,t){return function(e){switch("react-native"===e||"java-spring"===e||"apple-ios"===e||"dotnet-aspnetcore"===e?e:e?.split("-")[0]){case"dotnet":case"java":return{...a,...i};case"java-spring":case"dotnet-aspnetcore":return{...a,...i,[n.CRASHES]:(0,s.t)("A request that resulted in an unhandled exception and hence a Server Error response")};case"android":case"cordova":case"react-native":case"flutter":return{...a,...i,[n.CRASHED]:(0,s.t)("An unhandled exception that resulted in the application crashing")};case"apple":return{...a,...i,[n.CRASHED]:(0,s.t)("An error that resulted in the application crashing")};case"node":case"javascript":return{...a,[n.CRASHED]:(0,s.t)("During the session an unhandled global error/promise rejection occurred."),[n.ABNORMAL]:(0,s.t)("Non applicable for Javascript."),[n.HEALTHY]:(0,s.t)("No errors were captured during session life-time."),[n.ERRORED]:(0,s.t)("During the session at least one handled error occurred."),[n.UNHANDLED]:"An error was captured by the global 'onerror' or 'onunhandledrejection' handler."};case"apple-ios":case"minidump":case"native":return{...a,...l};case"rust":return{...a,...l,[n.CRASHED]:(0,s.t)("The application had an unrecoverable error (a panic)")};default:return{...a,[n.CRASHED]:(0,s.t)("Number of users who experienced an unhandled error"),[n.ABNORMAL]:(0,s.t)("An unknown session exit"),[n.HEALTHY]:i.healthy,[n.ERRORED]:i.errored,[n.UNHANDLED]:i.unhandled,[n.ANR_RATE]:(0,s.t)("Percentage of unique users that experienced an App Not Responding (ANR) error"),[n.FOREGROUND_ANR_RATE]:(0,s.t)("Percentage of unique users that experienced an App Not Responding (ANR) error when the app was running in the foreground")}}}(t)[e]}}}]);
//# sourceMappingURL=../sourcemaps/app_utils_sessions_tsx.50ed6dbedcc1302bf010c74f853706c2.js.map