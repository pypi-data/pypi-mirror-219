"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_organizationIntegrations_pluginDetailedView_tsx"],{"./app/components/switchButton.tsx":(t,e,i)=>{i.d(e,{Z:()=>u});var n=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=i("../node_modules/react/index.js"),o=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(t){let{forwardedRef:e,size:i="sm",isActive:n,forceActiveColor:s,isLoading:r,isDisabled:a,toggle:l,id:d,name:p,className:u,...h}=t;return(0,o.tZ)(c,{ref:e,id:d,name:p,type:"button",className:u,onClick:a?void 0:l,role:"checkbox","aria-checked":n,isLoading:r,disabled:a,isActive:n,size:i,"data-test-id":"switch",...h,children:(0,o.tZ)(g,{isDisabled:a,isActive:n,forceActiveColor:s,size:i})})}r.displayName="Switch";const a=t=>"sm"===t.size?16:24,l=t=>a(t)-("sm"===t.size?4:8),d=t=>"sm"===t.size?1:3,p=t=>t.isActive?d(t)+.875*a(t):d(t),c=(0,n.Z)("button",{target:"e1slsb9u1"})("display:inline-block;background:none;padding:0;border:1px solid ",(t=>t.theme.border),";position:relative;box-shadow:inset ",(t=>t.theme.dropShadowMedium),";height:",a,"px;width:",(t=>1.875*a(t)),"px;border-radius:",a,"px;transition:border 0.1s,box-shadow 0.1s;&[disabled]{cursor:not-allowed;}&:focus,&.focus-visible{outline:none;border-color:",(t=>t.theme.focusBorder),";box-shadow:",(t=>t.theme.focusBorder)," 0 0 0 1px;}"),g=(0,n.Z)("span",{target:"e1slsb9u0"})("display:block;position:absolute;border-radius:50%;transition:0.25s all ease;top:",d,"px;transform:translateX(",p,"px);width:",l,"px;height:",l,"px;background:",(t=>t.isActive||t.forceActiveColor?t.theme.active:t.theme.border),";opacity:",(t=>t.isDisabled?.4:null),";"),u=(0,s.forwardRef)(((t,e)=>(0,o.tZ)(r,{...t,forwardedRef:e})))},"./app/views/settings/organizationIntegrations/pluginDeprecationAlert.tsx":(t,e,i)=>{i.d(e,{Z:()=>g});var n=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=i("../node_modules/react/index.js"),o=i("./app/components/alert.tsx"),r=i("./app/components/button.tsx"),a=i("./app/locale.tsx"),l=i("./app/utils/integrationUtil.tsx"),d=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class p extends s.Component{render(){const{organization:t,plugin:e}=this.props;if(!e.deprecationDate)return(0,d.tZ)(s.Fragment,{});const i=e.altIsSentryApp?"sentry-apps":"integrations",n=`/settings/${t.slug}/${i}/${e.firstPartyAlternative}/`,r=`?${e.altIsSentryApp?"":"tab=configurations&"}referrer=directory_upgrade_now`;return(0,d.tZ)("div",{children:(0,d.tZ)(o.bZ,{type:"warning",showIcon:!0,trailingItems:(0,d.tZ)(c,{href:`${n}${r}`,size:"xs",onClick:()=>(0,l.Db)("integrations.resolve_now_clicked",{integration_type:"plugin",integration:e.slug,organization:t}),children:(0,a.t)("Upgrade Now")}),children:`This integration is being deprecated on ${e.deprecationDate}. Please upgrade to avoid any disruption.`})})}}p.displayName="PluginDeprecationAlert";const c=(0,n.Z)(r.zx,{target:"eezte6i0"})("color:",(t=>t.theme.subText),";float:right;"),g=p},"./app/views/settings/organizationIntegrations/pluginDetailedView.tsx":(t,e,i)=>{i.r(e),i.d(e,{default:()=>S});var n=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(i("../node_modules/core-js/modules/es.array.push.js"),i("../node_modules/react/index.js")),r=i("./app/actionCreators/modal.tsx"),a=i("./app/components/button.tsx"),l=i("./app/components/contextPickerModal.tsx"),d=i("./app/locale.tsx"),p=i("./app/styles/space.tsx"),c=i("./app/utils/withDomainRequired.tsx"),g=i("./app/utils/withOrganization.tsx"),u=i("./app/views/settings/organizationIntegrations/abstractIntegrationDetailedView.tsx"),h=i("./app/actionCreators/indicator.tsx"),m=i("./app/components/acl/access.tsx"),b=i("./app/components/alert.tsx"),x=i("./app/components/confirm.tsx"),f=i("./app/components/idBadge/projectBadge.tsx"),j=i("./app/components/switchButton.tsx"),y=i("./app/icons/index.tsx"),Z=i("./app/utils/withApi.tsx"),w=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class v extends o.Component{constructor(){var t;super(...arguments),t=this,(0,n.Z)(this,"pluginUpdate",(async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST";const{organization:n,projectItem:s,plugin:o}=t.props;await t.props.api.requestPromise(`/projects/${n.slug}/${s.projectSlug}/plugins/${o.id}/`,{method:i,data:e})})),(0,n.Z)(this,"updatePluginEnableStatus",(async t=>{t?await this.pluginUpdate({enabled:t}):await this.pluginUpdate({},"DELETE")})),(0,n.Z)(this,"handleReset",(async()=>{try{(0,h.E3)((0,d.t)("Removing...")),await this.pluginUpdate({reset:!0}),(0,h.S9)((0,d.t)("Configuration was removed")),this.props.onResetConfiguration(this.projectId),this.props.trackIntegrationAnalytics("integrations.uninstall_completed")}catch(t){(0,h.Iw)((0,d.t)("Unable to remove configuration"))}})),(0,n.Z)(this,"handleUninstallClick",(()=>{this.props.trackIntegrationAnalytics("integrations.uninstall_clicked")})),(0,n.Z)(this,"toggleEnablePlugin",(async function(e){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{(0,h.E3)((0,d.t)("Enabling...")),await t.updatePluginEnableStatus(i),(0,h.S9)(i?(0,d.t)("Configuration was enabled."):(0,d.t)("Configuration was disabled.")),t.props.onPluginEnableStatusChange(e,i),t.props.trackIntegrationAnalytics(i?"integrations.enabled":"integrations.disabled")}catch(t){(0,h.Iw)(i?(0,d.t)("Unable to enable configuration."):(0,d.t)("Unable to disable configuration."))}}))}get projectId(){return this.props.projectItem.projectId}getConfirmMessage(){return(0,w.tZ)(o.Fragment,{children:(0,w.tZ)(b.bZ,{type:"error",showIcon:!0,children:(0,d.t)("Deleting this installation will disable the integration for this project and remove any configurations.")})})}get projectForBadge(){const{projectItem:t}=this.props;return{slug:t.projectSlug,platform:t.projectPlatform?t.projectPlatform:void 0}}render(){const{className:t,plugin:e,organization:i,projectItem:n}=this.props;return(0,w.tZ)(C,{"data-test-id":"installed-plugin",children:(0,w.tZ)(m.Z,{access:["org:integrations"],children:s=>{let{hasAccess:o}=s;return(0,w.BX)(z,{className:t,children:[(0,w.tZ)(_,{children:(0,w.tZ)(f.Z,{project:this.projectForBadge})}),(0,w.tZ)("div",{children:(0,w.tZ)(k,{borderless:!0,icon:(0,w.tZ)(y.iC,{}),disabled:!o,to:`/settings/${i.slug}/projects/${n.projectSlug}/plugins/${e.id}/`,"data-test-id":"integration-configure-button",children:(0,d.t)("Configure")})}),(0,w.tZ)("div",{children:(0,w.tZ)(x.Z,{priority:"danger",onConfirming:this.handleUninstallClick,disabled:!o,confirmText:"Delete Installation",onConfirm:()=>this.handleReset(),message:this.getConfirmMessage(),children:(0,w.tZ)(k,{disabled:!o,borderless:!0,icon:(0,w.tZ)(y.Fz,{}),"data-test-id":"integration-remove-button",children:(0,d.t)("Uninstall")})})}),(0,w.tZ)(j.Z,{isActive:n.enabled,toggle:()=>this.toggleEnablePlugin(n.projectId,!n.enabled),isDisabled:!o})]})}})})}}v.displayName="InstalledPlugin";const I=(0,Z.Z)(v),C=(0,s.Z)("div",{target:"e1jdyyq33"})("padding:",(0,p.D)(2),";border:1px solid ",(t=>t.theme.border),";border-bottom:none;background-color:",(t=>t.theme.background),";&:last-child{border-bottom:1px solid ",(t=>t.theme.border),";}"),k=(0,s.Z)(a.zx,{target:"e1jdyyq32"})("color:",(t=>t.theme.gray300),";"),z=(0,s.Z)("div",{target:"e1jdyyq31"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),_=(0,s.Z)("div",{target:"e1jdyyq30"})({name:"m4hdlm",styles:"flex:1 0 fit-content;box-sizing:border-box;display:flex;flex-direction:row;min-width:0"});var A=i("./app/views/settings/organizationIntegrations/pluginDeprecationAlert.tsx");class D extends u.Z{constructor(){var t;super(...arguments),t=this,(0,n.Z)(this,"handleResetConfiguration",(t=>{const e=this.plugin.projectList.slice(),i=e.findIndex((e=>e.projectId===t));i<0||(e.splice(i,1),this.setState({plugins:[{...this.state.plugins[0],projectList:e}]}))})),(0,n.Z)(this,"handlePluginEnableStatus",(function(e){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=t.plugin.projectList.slice(),s=n.findIndex((t=>t.projectId===e));s<0||(n[s]={...n[s],enabled:i},t.setState({plugins:[{...t.state.plugins[0],projectList:n}]}))})),(0,n.Z)(this,"handleAddToProject",(()=>{const t=this.plugin,{organization:e,router:i}=this.props;this.trackIntegrationAnalytics("integrations.plugin_add_to_project_clicked"),r.openModal((n=>(0,w.tZ)(l.Z,{...n,nextPath:`/settings/${e.slug}/projects/:projectId/plugins/${t.id}/`,needProject:!0,needOrg:!1,onFinish:t=>{n.closeModal(),i.push((0,c.D)(t))}})),{closeEvents:"escape-key"})}))}getEndpoints(){const{organization:t}=this.props,{integrationSlug:e}=this.props.params;return[["plugins",`/organizations/${t.slug}/plugins/configs/?plugins=${e}`]]}get integrationType(){return"plugin"}get plugin(){return this.state.plugins[0]}get description(){return this.plugin.description||""}get author(){return this.plugin.author?.name}get resourceLinks(){return this.plugin.resourceLinks||[]}get installationStatus(){return this.plugin.projectList.length>0?"Installed":"Not Installed"}get integrationName(){return`${this.plugin.name}${this.plugin.isHidden?" (Legacy)":""}`}get featureData(){return this.plugin.featureDescriptions}getTabDisplay(t){return"configurations"===t?"project configurations":"overview"}renderTopButton(t,e){return e?(0,w.tZ)(P,{"data-test-id":"install-button",disabled:t,onClick:this.handleAddToProject,size:"sm",priority:"primary",children:(0,d.t)("Add to Project")}):this.renderRequestIntegrationButton()}renderConfigurations(){const t=this.plugin,{organization:e}=this.props;return t.projectList.length?(0,w.BX)(o.Fragment,{children:[(0,w.tZ)(A.Z,{organization:e,plugin:t}),(0,w.tZ)("div",{children:t.projectList.map((i=>(0,w.tZ)(I,{organization:e,plugin:t,projectItem:i,onResetConfiguration:this.handleResetConfiguration,onPluginEnableStatusChange:this.handlePluginEnableStatus,trackIntegrationAnalytics:this.trackIntegrationAnalytics},i.projectId)))})]}):this.renderEmptyConfigurations()}}const P=(0,s.Z)(a.zx,{target:"e1m44d6g0"})("margin-bottom:",(0,p.D)(1),";"),S=(0,g.Z)(D)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationIntegrations_pluginDetailedView_tsx.bbaf246b94d763c61ccf646c41f23691.js.map