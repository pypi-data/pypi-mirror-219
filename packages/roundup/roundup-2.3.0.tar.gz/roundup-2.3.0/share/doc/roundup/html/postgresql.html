<!DOCTYPE html>




None


<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description"
        content="Page postgresql in documentation on the Roundup issue tracker, version 2.3.0.">
    
    <title>PostgreSQL/psycopg Backend &mdash; Roundup 2.3.0 documentation</title>
    
    <link rel="stylesheet" href="_static/NO_basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    './',
          VERSION:     '2.3.0',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="Roundup 2.3.0 documentation" href="index.html" />
    <link rel="next" title="Implementation notes" href="implementation.html" />
    <link rel="prev" title="MySQL Backend" href="mysql.html" /> 
  </head>
  <body>
    <div class="header"><div class="label">Roundup</div>
        <div id="searchbox" style="display: none">
          <form class="search" action="search.html" method="get">
            <input type="text" name="q" size="18" />
            <input type="submit" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
        </div>
        <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
    <div class="navigation">
      <div class="menu">
       
    <h3><a href="index.html">Table Of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">PostgreSQL/psycopg Backend</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#running-the-postgresql-unit-tests">Running the PostgreSQL unit tests</a></li>
<li><a class="reference internal" href="#credit">Credit</a></li>
</ul>
</li>
</ul>

    <h4>Previous topic</h4>
    <p class="topless"><a href="mysql.html"
                          title="previous chapter">MySQL Backend</a></p>
    <h4>Next topic</h4>
    <p class="topless"><a href="implementation.html"
                          title="next chapter">Implementation notes</a></p>
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/postgresql.txt"
             rel="nofollow">Show Source</a></li>
    </ul>
  <div id="searchbox" style="display: none">
    <h3>Quick search</h3>
      <form class="search" action="search.html" method="get">
        <input type="text" name="q" size="18" />
        <input type="submit" value="Go" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
      <p style="font-size: 90%">Enter search terms or a module, class or function name.</p>
  </div>
  <script type="text/javascript">$('#searchbox').show(0);</script>
      </div>
    </div>
    <div class="content">
       
    <div class="related related-top">
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="implementation.html" title="Implementation notes"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="mysql.html" title="MySQL Backend"
             accesskey="P">previous</a></li>
        <li><a href="index.html">Roundup 2.3.0 documentation</a></li> 
      </ul>
    </div>
       
  <div class="section" id="postgresql-psycopg-backend">
<span id="index-0"></span><h1>PostgreSQL/psycopg Backend</h1>
<p>This are notes about PostqreSQL backend based on the psycopg adapter for
Roundup issue tracker.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites</h2>
<p>To use PostgreSQL as backend for storing roundup data, you should
additionally install:</p>
<ol class="arabic simple">
<li><a class="reference external" href="https://www.postgresql.org/">PostgreSQL</a> 8.x or higher</li>
<li>The <a class="reference external" href="https://www.psycopg.org/">psycopg</a> python interface to <a class="reference external" href="https://www.postgresql.org/">PostgreSQL</a></li>
</ol>
<p>Note that you currently need at least version 2.8 of <a class="reference external" href="https://www.psycopg.org/">psycopg</a> – the
postgresql backend will work with 2.7 but if you’re using the native
postgresql indexer you need at least 2.8. Also if you want to run the
tests, these also need 2.8. If your distribution has an older version we
suggest that you install into a python virtual environment.</p>
</div>
<div class="section" id="running-the-postgresql-unit-tests">
<h2>Running the PostgreSQL unit tests</h2>
<p>The user that you’re running the tests as will need to be able to access
the postgresql database on the local machine and create and drop
databases. See the config values in ‘test/db_test_base.py’
about which database connection, name and user will be used.</p>
<p>At this time the following command will setup the user:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">postgres</span> <span class="n">psql</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;CREATE ROLE rounduptest WITH CREATEDB LOGIN PASSWORD &#39;rounduptest&#39;;&quot;</span> <span class="o">-</span><span class="n">U</span> <span class="n">postgres</span>
</pre></div>
</div>
<p>Note <code class="docutils literal notranslate"><span class="pre">rounduptest</span></code> is a well known account, so you should
remove/disable the account after testing and set up a suitable
production account. You need to remove any database owned by
<code class="docutils literal notranslate"><span class="pre">rounduptest</span></code> first. So something like this should work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">postgres</span> <span class="n">psql</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;DROP DATABASE rounduptest;&quot;</span> <span class="o">-</span><span class="n">U</span> <span class="n">postgres</span>
<span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">postgres</span> <span class="n">psql</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;DROP ROLE rounduptest;&quot;</span> <span class="o">-</span><span class="n">U</span> <span class="n">postgres</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">rounduptest</span></code> database is left in a broken state
(e.g. because of a crash during testing) dropping the database and
restarting the tests should fix it.</p>
</div>
<div class="section" id="credit">
<h2>Credit</h2>
<p>The postgresql backend was originally submitted by Federico Di Gregorio
&lt;<a class="reference external" href="mailto:fog&#37;&#52;&#48;initd&#46;org">fog<span>&#64;</span>initd<span>&#46;</span>org</a>&gt;</p>
</div>
</div>


       
    <div class="related related-bottom">
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="implementation.html" title="Implementation notes"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="mysql.html" title="MySQL Backend"
             accesskey="P">previous</a></li>
        <li><a href="index.html">Roundup 2.3.0 documentation</a></li> 
      </ul>
    </div>
    </div>
    <div class="footer">
        &copy; Copyright 2009-2021, Richard Jones, Roundup-Team.
    </div>
  </body>
</html>