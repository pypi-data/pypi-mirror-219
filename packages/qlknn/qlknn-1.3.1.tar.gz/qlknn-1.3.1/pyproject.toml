[build-system]
requires = ["poetry-core>=1.0.0", "poetry-dynamic-versioning"]
build-backend = "poetry_dynamic_versioning.backend"

[tool.poetry-dynamic-versioning]
enable = false
dirty = true
pattern = "default-unprefixed"
style = "pep440"
strict = true

[tool.poetry]
name = "qlknn"
version = "1.3.1"
description = "Tools to create QuaLiKiz Quasi-linear gyrokinetic code Neural Networks"
readme = "README.md"
authors = ["Karel-van-de-Plassche <karelvandeplassche@gmail.com>"]
license = "MIT"
repository = "https://gitlab.com/Karel-van-de-Plassche/QLKNN-develop"
classifiers = [
    "Intended Audience :: Developers",
    "Intended Audience :: Science/Research",
    "Programming Language :: Python :: 3",
    "Natural Language :: English",
    "Topic :: Utilities"
]

[tool.poetry.dependencies]
python = ">=3.8,<3.12"
ipython = "*"
numpy = "*"
scipy = "*"
xarray = "*"
pandas = ">=0.15.2"
numexpr = "*"
tables = "*"
gitpython = "*"
netCDF4 = "*"
matplotlib = "*"
scikit-learn = {version = "*", optional = true }
peewee = { version = ">=3.0.16", optional = true }
psycopg2 = {version = "*", optional = true }
luigi = {version = "*", optional = true }
tensorflow = { version = ">=2.2", optional = true }
poetry-dynamic-versioning = {extras = ["plugin"], version = "^0.24.0"}

[tool.poetry.extras]
dataset = ["scikit-learn"]
nndb = ["peewee", "psycopg2"]
pipeline = ["luigi"]
training = ["tensorflow"]

[tool.poetry.group.docs]
optional = true

[tool.poetry.group.docs.dependencies]
sphinx = ">=3.2.1"
sphinx_rtd_theme = ">=0.5"
recommonmark = ">=0.6"
sphinx-autosummary-accessors = ">=0.1.2"
sphinx-autodoc-typehints = ">=1.1.1"

[tool.poetry.group.dev.dependencies]
coverage = "*"
pytest = "*"
pytest-cov = "*"

[tool.poetry.scripts]
qlknn = "qlknn.cli:main"
quickslicer = "qlknn.plots.quickslicer:main"
clustering = "qlknn.dataset.clustering:main"

[tool.black]
line-length = 98 # Length of a split Karel terminal
target-version = ['py37']
