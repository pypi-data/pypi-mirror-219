{{ request.actions['approve'].class|generate_import }}
{{ request.type.imports|generate_import }}

class {{ request.type|class_header }}:

    type_id = "{{ request_name }}"
    name = "{{ request_name.capitalize() }}"

    available_actions = {
        {{ request.type.parent_actions }},
        "accept": {{ request.actions['approve'].class|base_name }}
    }

    allowed_topic_ref_types = ["{{ vars.module.prefix_snake }}"] # On the Request record object, the topic is referenced by pid. This pid is
                                         # extracted by Resolver subclassed from RecordResolver, which has hardcoded
                                         # {"record": {pid}} as reference value. This reference is then by
                                         # setattr set on the Request record topic ReferencedEntityField, and the set
                                         # operation checks, whether this key is in allowed_topic_ref_types
    #TODO would it make sense to customize the topic ref types?
