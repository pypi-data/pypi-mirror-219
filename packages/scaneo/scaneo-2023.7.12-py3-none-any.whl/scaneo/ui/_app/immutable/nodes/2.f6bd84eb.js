import{J as K,K as be,S as A,i as B,s as N,k as E,l as C,m as v,h,n as m,p as G,b as k,I as S,e as R,v as X,d as y,f as Y,g as b,L as He,y as I,a as j,z as O,c as H,A as D,H as _,M as ze,N as Ke,B as M,x as ae,q,r as W,u as te,O as _t,P as ye,C as xe,D as $e,E as et,F as tt,o as Se,w as Nn,Q as se,R as Re,T as nt,G as x,U as rt,t as st,V as J,W as Z,X as On,Y as Vn,Z as jn,_ as Ne,$ as Hn,a0 as zn,a1 as Rn}from"../chunks/index.f69b56cb.js";import{j as Gn,w as le}from"../chunks/singletons.7574c25d.js";import{u as pe,o as oe,i as Un,a as qn,s as Wn,f as Fn,g as rn,m as Jn,b as Zn,c as Ie,e as sn,d as ln,h as Qn,p as Xn,t as Yn,n as Kn,j as xn}from"../chunks/optionsStore.4bceb76f.js";import{_ as ke}from"../chunks/preload-helper.41c905a7.js";import{p as $n}from"../chunks/stores.29c3b4f7.js";function er(r,e,t,n){var s,i,l=!1,o=t.length>=2,a=(p,w)=>{if(s=w,o&&(i=p),!l){let T=e(p,w);if(e.length<2)w(T);else return T}l=!1},c=Gn(r,a,n),f=!Array.isArray(r);function d(p){var w=t(p,i);f?(l=!0,r.set(w)):w.forEach((T,Q)=>{l=!0,r[Q].set(T)}),l=!1}var g=!1;function u(p){var w,T,Q,P;if(g){P=p(K(c)),s(P);return}var V=c.subscribe(ue=>{g?w?T=!0:w=!0:Q=ue});P=p(Q),g=!0,s(P),V(),g=!1,T&&(P=K(c)),w&&d(P)}return{subscribe:c.subscribe,set(p){u(()=>p)},update:u}}const tr=20,ve=le([]),it=le(null),Oe=new Map,bt=r=>{if(Oe.has(r))return;const e=setTimeout(()=>{Oe.delete(r),an(r)},1e3);Oe.set(r,e)},nr=r=>{const e=Oe.get(r);e&&clearTimeout(e)};function on(r){r.id&&nr(r.id),ve.update(e=>e.map(t=>t.id===r.id?{...t,...r}:t))}function rr(r){ve.update(e=>[r,...e].slice(0,tr))}function sr(r){K(ve).find(e=>e.id===r.id)?on(r):rr(r)}function ir(r){ve.update(e=>(r?bt(r):e.forEach(t=>{bt(t.id)}),e.map(t=>t.id===r||r===void 0?{...t,visible:!1}:t)))}function an(r){ve.update(e=>r===void 0?[]:e.filter(t=>t.id!==r))}function lr(r){it.set(r)}function or(r){let e;it.update(t=>(e=r-(t||0),null)),ve.update(t=>t.map(n=>({...n,pauseDuration:n.pauseDuration+e})))}const ar={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function cr(r={}){return{toasts:er(ve,t=>t.map(n=>{var s,i;return{...r,...r[n.type],...n,duration:n.duration||((s=r[n.type])==null?void 0:s.duration)||(r==null?void 0:r.duration)||ar[n.type],style:[r.style,(i=r[n.type])==null?void 0:i.style,n.style].join(";")}}),t=>t),pausedAt:it}}const fr=r=>typeof r=="function",pt=(r,e)=>fr(r)?r(e):r,ur=(()=>{let r=0;return()=>(r+=1,r.toString())})(),cn=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){const e=matchMedia("(prefers-reduced-motion: reduce)");r=!e||e.matches}return r}})(),dr=(r,e="blank",t)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...t,id:(t==null?void 0:t.id)||ur()}),De=r=>(e,t)=>{const n=dr(e,r,t);return sr(n),n.id},re=(r,e)=>De("blank")(r,e);re.error=De("error");re.success=De("success");re.loading=De("loading");re.custom=De("custom");re.dismiss=r=>{ir(r)};re.remove=r=>an(r);re.promise=(r,e,t)=>{const n=re.loading(e.loading,{...t,...t==null?void 0:t.loading});return r.then(s=>(re.success(pt(e.success,s),{id:n,...t,...t==null?void 0:t.success}),s)).catch(s=>{re.error(pt(e.error,s),{id:n,...t,...t==null?void 0:t.error})}),r};function mr(r,e,t){const{reverseOrder:n,gutter:s=8,defaultPosition:i}=t||{},l=e.filter(f=>(f.position||i)===(r.position||i)&&f.height),o=l.findIndex(f=>f.id===r.id),a=l.filter((f,d)=>d<o&&f.visible).length;return l.filter(f=>f.visible).slice(...n?[a+1]:[0,a]).reduce((f,d)=>f+(d.height||0)+s,0)}const hr={startPause(){lr(Date.now())},endPause(){or(Date.now())},updateHeight:(r,e)=>{on({id:r,height:e})},calculateOffset:mr};function gr(r){const{toasts:e,pausedAt:t}=cr(r),n=new Map;let s;const i=[t.subscribe(l=>{if(l){for(const[,o]of n)clearTimeout(o);n.clear()}s=l}),e.subscribe(l=>{if(s)return;const o=Date.now();for(const a of l){if(n.has(a.id)||a.duration===1/0)continue;const c=(a.duration||0)+a.pauseDuration-(o-a.createdAt);if(c<0)return a.visible&&re.dismiss(a.id),null;n.set(a.id,setTimeout(()=>re.dismiss(a.id),c))}})];return be(()=>{for(const l of i)l()}),{toasts:e,handlers:hr}}function _r(r){let e;return{c(){e=E("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){m(e,"class","svelte-11kvm4p"),G(e,"--primary",r[0]),G(e,"--secondary",r[1])},m(t,n){k(t,e,n)},p(t,[n]){n&1&&G(e,"--primary",t[0]),n&2&&G(e,"--secondary",t[1])},i:S,o:S,d(t){t&&h(e)}}}function br(r,e,t){let{primary:n="#61d345"}=e,{secondary:s="#fff"}=e;return r.$$set=i=>{"primary"in i&&t(0,n=i.primary),"secondary"in i&&t(1,s=i.secondary)},[n,s]}class pr extends A{constructor(e){super(),B(this,e,br,_r,N,{primary:0,secondary:1})}}function vr(r){let e;return{c(){e=E("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){m(e,"class","svelte-1ee93ns"),G(e,"--primary",r[0]),G(e,"--secondary",r[1])},m(t,n){k(t,e,n)},p(t,[n]){n&1&&G(e,"--primary",t[0]),n&2&&G(e,"--secondary",t[1])},i:S,o:S,d(t){t&&h(e)}}}function Lr(r,e,t){let{primary:n="#ff4b4b"}=e,{secondary:s="#fff"}=e;return r.$$set=i=>{"primary"in i&&t(0,n=i.primary),"secondary"in i&&t(1,s=i.secondary)},[n,s]}class yr extends A{constructor(e){super(),B(this,e,Lr,vr,N,{primary:0,secondary:1})}}function kr(r){let e;return{c(){e=E("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){m(e,"class","svelte-1j7dflg"),G(e,"--primary",r[0]),G(e,"--secondary",r[1])},m(t,n){k(t,e,n)},p(t,[n]){n&1&&G(e,"--primary",t[0]),n&2&&G(e,"--secondary",t[1])},i:S,o:S,d(t){t&&h(e)}}}function wr(r,e,t){let{primary:n="#616161"}=e,{secondary:s="#e0e0e0"}=e;return r.$$set=i=>{"primary"in i&&t(0,n=i.primary),"secondary"in i&&t(1,s=i.secondary)},[n,s]}class Er extends A{constructor(e){super(),B(this,e,wr,kr,N,{primary:0,secondary:1})}}function Cr(r){let e,t,n,s;const i=[r[0]];let l={};for(let a=0;a<i.length;a+=1)l=He(l,i[a]);t=new Er({props:l});let o=r[2]!=="loading"&&vt(r);return{c(){e=E("div"),I(t.$$.fragment),n=j(),o&&o.c(),this.h()},l(a){e=C(a,"DIV",{class:!0});var c=v(e);O(t.$$.fragment,c),n=H(c),o&&o.l(c),c.forEach(h),this.h()},h(){m(e,"class","indicator svelte-1kgeier")},m(a,c){k(a,e,c),D(t,e,null),_(e,n),o&&o.m(e,null),s=!0},p(a,c){const f=c&1?ze(i,[Ke(a[0])]):{};t.$set(f),a[2]!=="loading"?o?(o.p(a,c),c&4&&b(o,1)):(o=vt(a),o.c(),b(o,1),o.m(e,null)):o&&(X(),y(o,1,1,()=>{o=null}),Y())},i(a){s||(b(t.$$.fragment,a),b(o),s=!0)},o(a){y(t.$$.fragment,a),y(o),s=!1},d(a){a&&h(e),M(t),o&&o.d()}}}function Sr(r){let e,t,n;var s=r[1];function i(l){return{}}return s&&(e=ae(s,i())),{c(){e&&I(e.$$.fragment),t=R()},l(l){e&&O(e.$$.fragment,l),t=R()},m(l,o){e&&D(e,l,o),k(l,t,o),n=!0},p(l,o){if(o&2&&s!==(s=l[1])){if(e){X();const a=e;y(a.$$.fragment,1,0,()=>{M(a,1)}),Y()}s?(e=ae(s,i()),I(e.$$.fragment),b(e.$$.fragment,1),D(e,t.parentNode,t)):e=null}},i(l){n||(e&&b(e.$$.fragment,l),n=!0)},o(l){e&&y(e.$$.fragment,l),n=!1},d(l){l&&h(t),e&&M(e,l)}}}function Ir(r){let e,t;return{c(){e=E("div"),t=q(r[1]),this.h()},l(n){e=C(n,"DIV",{class:!0});var s=v(e);t=W(s,r[1]),s.forEach(h),this.h()},h(){m(e,"class","animated svelte-1kgeier")},m(n,s){k(n,e,s),_(e,t)},p(n,s){s&2&&te(t,n[1])},i:S,o:S,d(n){n&&h(e)}}}function vt(r){let e,t,n,s;const i=[Mr,Dr],l=[];function o(a,c){return a[2]==="error"?0:1}return t=o(r),n=l[t]=i[t](r),{c(){e=E("div"),n.c(),this.h()},l(a){e=C(a,"DIV",{class:!0});var c=v(e);n.l(c),c.forEach(h),this.h()},h(){m(e,"class","status svelte-1kgeier")},m(a,c){k(a,e,c),l[t].m(e,null),s=!0},p(a,c){let f=t;t=o(a),t===f?l[t].p(a,c):(X(),y(l[f],1,1,()=>{l[f]=null}),Y(),n=l[t],n?n.p(a,c):(n=l[t]=i[t](a),n.c()),b(n,1),n.m(e,null))},i(a){s||(b(n),s=!0)},o(a){y(n),s=!1},d(a){a&&h(e),l[t].d()}}}function Dr(r){let e,t;const n=[r[0]];let s={};for(let i=0;i<n.length;i+=1)s=He(s,n[i]);return e=new pr({props:s}),{c(){I(e.$$.fragment)},l(i){O(e.$$.fragment,i)},m(i,l){D(e,i,l),t=!0},p(i,l){const o=l&1?ze(n,[Ke(i[0])]):{};e.$set(o)},i(i){t||(b(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){M(e,i)}}}function Mr(r){let e,t;const n=[r[0]];let s={};for(let i=0;i<n.length;i+=1)s=He(s,n[i]);return e=new yr({props:s}),{c(){I(e.$$.fragment)},l(i){O(e.$$.fragment,i)},m(i,l){D(e,i,l),t=!0},p(i,l){const o=l&1?ze(n,[Ke(i[0])]):{};e.$set(o)},i(i){t||(b(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){M(e,i)}}}function Tr(r){let e,t,n,s;const i=[Ir,Sr,Cr],l=[];function o(a,c){return typeof a[1]=="string"?0:typeof a[1]<"u"?1:a[2]!=="blank"?2:-1}return~(e=o(r))&&(t=l[e]=i[e](r)),{c(){t&&t.c(),n=R()},l(a){t&&t.l(a),n=R()},m(a,c){~e&&l[e].m(a,c),k(a,n,c),s=!0},p(a,[c]){let f=e;e=o(a),e===f?~e&&l[e].p(a,c):(t&&(X(),y(l[f],1,1,()=>{l[f]=null}),Y()),~e?(t=l[e],t?t.p(a,c):(t=l[e]=i[e](a),t.c()),b(t,1),t.m(n.parentNode,n)):t=null)},i(a){s||(b(t),s=!0)},o(a){y(t),s=!1},d(a){~e&&l[e].d(a),a&&h(n)}}}function Pr(r,e,t){let n,s,i,{toast:l}=e;return r.$$set=o=>{"toast"in o&&t(3,l=o.toast)},r.$$.update=()=>{r.$$.dirty&8&&t(2,{type:n,icon:s,iconTheme:i}=l,n,(t(1,s),t(3,l)),(t(0,i),t(3,l)))},[i,s,n,l]}class lt extends A{constructor(e){super(),B(this,e,Pr,Tr,N,{toast:3})}}function Ar(r){let e,t,n;var s=r[0].message;function i(l){return{props:{toast:l[0]}}}return s&&(e=ae(s,i(r))),{c(){e&&I(e.$$.fragment),t=R()},l(l){e&&O(e.$$.fragment,l),t=R()},m(l,o){e&&D(e,l,o),k(l,t,o),n=!0},p(l,o){const a={};if(o&1&&(a.toast=l[0]),o&1&&s!==(s=l[0].message)){if(e){X();const c=e;y(c.$$.fragment,1,0,()=>{M(c,1)}),Y()}s?(e=ae(s,i(l)),I(e.$$.fragment),b(e.$$.fragment,1),D(e,t.parentNode,t)):e=null}else s&&e.$set(a)},i(l){n||(e&&b(e.$$.fragment,l),n=!0)},o(l){e&&y(e.$$.fragment,l),n=!1},d(l){l&&h(t),e&&M(e,l)}}}function Br(r){let e=r[0].message+"",t;return{c(){t=q(e)},l(n){t=W(n,e)},m(n,s){k(n,t,s)},p(n,s){s&1&&e!==(e=n[0].message+"")&&te(t,e)},i:S,o:S,d(n){n&&h(t)}}}function Nr(r){let e,t,n,s;const i=[Br,Ar],l=[];function o(f,d){return typeof f[0].message=="string"?0:1}t=o(r),n=l[t]=i[t](r);let a=[{class:"message"},r[0].ariaProps],c={};for(let f=0;f<a.length;f+=1)c=He(c,a[f]);return{c(){e=E("div"),n.c(),this.h()},l(f){e=C(f,"DIV",{class:!0});var d=v(e);n.l(d),d.forEach(h),this.h()},h(){_t(e,c),ye(e,"svelte-1nauejd",!0)},m(f,d){k(f,e,d),l[t].m(e,null),s=!0},p(f,[d]){let g=t;t=o(f),t===g?l[t].p(f,d):(X(),y(l[g],1,1,()=>{l[g]=null}),Y(),n=l[t],n?n.p(f,d):(n=l[t]=i[t](f),n.c()),b(n,1),n.m(e,null)),_t(e,c=ze(a,[{class:"message"},d&1&&f[0].ariaProps])),ye(e,"svelte-1nauejd",!0)},i(f){s||(b(n),s=!0)},o(f){y(n),s=!1},d(f){f&&h(e),l[t].d()}}}function Or(r,e,t){let{toast:n}=e;return r.$$set=s=>{"toast"in s&&t(0,n=s.toast)},[n]}class Ge extends A{constructor(e){super(),B(this,e,Or,Nr,N,{toast:0})}}const Vr=r=>({toast:r&1}),Lt=r=>({ToastIcon:lt,ToastMessage:Ge,toast:r[0]});function jr(r){let e;const t=r[6].default,n=xe(t,r,r[7],Lt),s=n||zr(r);return{c(){s&&s.c()},l(i){s&&s.l(i)},m(i,l){s&&s.m(i,l),e=!0},p(i,l){n?n.p&&(!e||l&129)&&$e(n,t,i,i[7],e?tt(t,i[7],l,Vr):et(i[7]),Lt):s&&s.p&&(!e||l&1)&&s.p(i,e?l:-1)},i(i){e||(b(s,i),e=!0)},o(i){y(s,i),e=!1},d(i){s&&s.d(i)}}}function Hr(r){let e,t,n;var s=r[2];function i(l){return{props:{$$slots:{message:[Gr],icon:[Rr]},$$scope:{ctx:l}}}}return s&&(e=ae(s,i(r))),{c(){e&&I(e.$$.fragment),t=R()},l(l){e&&O(e.$$.fragment,l),t=R()},m(l,o){e&&D(e,l,o),k(l,t,o),n=!0},p(l,o){const a={};if(o&129&&(a.$$scope={dirty:o,ctx:l}),o&4&&s!==(s=l[2])){if(e){X();const c=e;y(c.$$.fragment,1,0,()=>{M(c,1)}),Y()}s?(e=ae(s,i(l)),I(e.$$.fragment),b(e.$$.fragment,1),D(e,t.parentNode,t)):e=null}else s&&e.$set(a)},i(l){n||(e&&b(e.$$.fragment,l),n=!0)},o(l){e&&y(e.$$.fragment,l),n=!1},d(l){l&&h(t),e&&M(e,l)}}}function zr(r){let e,t,n,s;return e=new lt({props:{toast:r[0]}}),n=new Ge({props:{toast:r[0]}}),{c(){I(e.$$.fragment),t=j(),I(n.$$.fragment)},l(i){O(e.$$.fragment,i),t=H(i),O(n.$$.fragment,i)},m(i,l){D(e,i,l),k(i,t,l),D(n,i,l),s=!0},p(i,l){const o={};l&1&&(o.toast=i[0]),e.$set(o);const a={};l&1&&(a.toast=i[0]),n.$set(a)},i(i){s||(b(e.$$.fragment,i),b(n.$$.fragment,i),s=!0)},o(i){y(e.$$.fragment,i),y(n.$$.fragment,i),s=!1},d(i){M(e,i),i&&h(t),M(n,i)}}}function Rr(r){let e,t;return e=new lt({props:{toast:r[0],slot:"icon"}}),{c(){I(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,s){D(e,n,s),t=!0},p(n,s){const i={};s&1&&(i.toast=n[0]),e.$set(i)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Gr(r){let e,t;return e=new Ge({props:{toast:r[0],slot:"message"}}),{c(){I(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,s){D(e,n,s),t=!0},p(n,s){const i={};s&1&&(i.toast=n[0]),e.$set(i)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Ur(r){let e,t,n,s,i,l;const o=[Hr,jr],a=[];function c(f,d){return f[2]?0:1}return t=c(r),n=a[t]=o[t](r),{c(){e=E("div"),n.c(),this.h()},l(f){e=C(f,"DIV",{class:!0,style:!0});var d=v(e);n.l(d),d.forEach(h),this.h()},h(){m(e,"class",s="base "+(r[0].height?r[4]:"transparent")+" "+(r[0].className||"")+" svelte-ug60r4"),m(e,"style",i=r[1]+"; "+r[0].style),G(e,"--factor",r[3])},m(f,d){k(f,e,d),a[t].m(e,null),l=!0},p(f,[d]){let g=t;t=c(f),t===g?a[t].p(f,d):(X(),y(a[g],1,1,()=>{a[g]=null}),Y(),n=a[t],n?n.p(f,d):(n=a[t]=o[t](f),n.c()),b(n,1),n.m(e,null)),(!l||d&17&&s!==(s="base "+(f[0].height?f[4]:"transparent")+" "+(f[0].className||"")+" svelte-ug60r4"))&&m(e,"class",s),(!l||d&3&&i!==(i=f[1]+"; "+f[0].style))&&m(e,"style",i),(d&3||d&11)&&G(e,"--factor",f[3])},i(f){l||(b(n),l=!0)},o(f){y(n),l=!1},d(f){f&&h(e),a[t].d()}}}function qr(r,e,t){let{$$slots:n={},$$scope:s}=e,{toast:i}=e,{position:l=void 0}=e,{style:o=""}=e,{Component:a=void 0}=e,c,f;return r.$$set=d=>{"toast"in d&&t(0,i=d.toast),"position"in d&&t(5,l=d.position),"style"in d&&t(1,o=d.style),"Component"in d&&t(2,a=d.Component),"$$scope"in d&&t(7,s=d.$$scope)},r.$$.update=()=>{if(r.$$.dirty&33){const d=(i.position||l||"top-center").includes("top");t(3,c=d?1:-1);const[g,u]=cn()?["fadeIn","fadeOut"]:["enter","exit"];t(4,f=i.visible?g:u)}},[i,o,a,c,f,l,n,s]}class Wr extends A{constructor(e){super(),B(this,e,qr,Ur,N,{toast:0,position:5,style:1,Component:2})}}const Fr=r=>({toast:r&1}),yt=r=>({toast:r[0]});function Jr(r){let e;const t=r[8].default,n=xe(t,r,r[7],yt),s=n||Qr(r);return{c(){s&&s.c()},l(i){s&&s.l(i)},m(i,l){s&&s.m(i,l),e=!0},p(i,l){n?n.p&&(!e||l&129)&&$e(n,t,i,i[7],e?tt(t,i[7],l,Fr):et(i[7]),yt):s&&s.p&&(!e||l&1)&&s.p(i,e?l:-1)},i(i){e||(b(s,i),e=!0)},o(i){y(s,i),e=!1},d(i){s&&s.d(i)}}}function Zr(r){let e,t;return e=new Ge({props:{toast:r[0]}}),{c(){I(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,s){D(e,n,s),t=!0},p(n,s){const i={};s&1&&(i.toast=n[0]),e.$set(i)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Qr(r){let e,t;return e=new Wr({props:{toast:r[0],position:r[0].position}}),{c(){I(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,s){D(e,n,s),t=!0},p(n,s){const i={};s&1&&(i.toast=n[0]),s&1&&(i.position=n[0].position),e.$set(i)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Xr(r){let e,t,n,s;const i=[Zr,Jr],l=[];function o(a,c){return a[0].type==="custom"?0:1}return t=o(r),n=l[t]=i[t](r),{c(){e=E("div"),n.c(),this.h()},l(a){e=C(a,"DIV",{class:!0});var c=v(e);n.l(c),c.forEach(h),this.h()},h(){m(e,"class","wrapper svelte-v01oml"),ye(e,"active",r[0].visible),ye(e,"transition",!cn()),G(e,"--factor",r[3]),G(e,"--offset",r[0].offset),G(e,"top",r[5]),G(e,"bottom",r[4]),G(e,"justify-content",r[2])},m(a,c){k(a,e,c),l[t].m(e,null),r[9](e),s=!0},p(a,[c]){let f=t;t=o(a),t===f?l[t].p(a,c):(X(),y(l[f],1,1,()=>{l[f]=null}),Y(),n=l[t],n?n.p(a,c):(n=l[t]=i[t](a),n.c()),b(n,1),n.m(e,null)),(!s||c&1)&&ye(e,"active",a[0].visible),c&8&&G(e,"--factor",a[3]),c&1&&G(e,"--offset",a[0].offset),c&32&&G(e,"top",a[5]),c&16&&G(e,"bottom",a[4]),c&4&&G(e,"justify-content",a[2])},i(a){s||(b(n),s=!0)},o(a){y(n),s=!1},d(a){a&&h(e),l[t].d(),r[9](null)}}}function Yr(r,e,t){let n,s,i,l,{$$slots:o={},$$scope:a}=e,{toast:c}=e,{setHeight:f}=e,d;Se(()=>{f(d.getBoundingClientRect().height)});function g(u){Nn[u?"unshift":"push"](()=>{d=u,t(1,d)})}return r.$$set=u=>{"toast"in u&&t(0,c=u.toast),"setHeight"in u&&t(6,f=u.setHeight),"$$scope"in u&&t(7,a=u.$$scope)},r.$$.update=()=>{var u,p,w,T,Q;r.$$.dirty&1&&t(5,n=(u=c.position)!=null&&u.includes("top")?0:null),r.$$.dirty&1&&t(4,s=(p=c.position)!=null&&p.includes("bottom")?0:null),r.$$.dirty&1&&t(3,i=(w=c.position)!=null&&w.includes("top")?1:-1),r.$$.dirty&1&&t(2,l=((T=c.position)==null?void 0:T.includes("center"))&&"center"||((Q=c.position)==null?void 0:Q.includes("right"))&&"flex-end"||null)},[c,d,l,i,s,n,f,a,o,g]}class Kr extends A{constructor(e){super(),B(this,e,Yr,Xr,N,{toast:0,setHeight:6})}}function kt(r,e,t){const n=r.slice();return n[11]=e[t],n}function wt(r,e){let t,n,s;function i(...l){return e[10](e[11],...l)}return n=new Kr({props:{toast:e[11],setHeight:i}}),{key:r,first:null,c(){t=R(),I(n.$$.fragment),this.h()},l(l){t=R(),O(n.$$.fragment,l),this.h()},h(){this.first=t},m(l,o){k(l,t,o),D(n,l,o),s=!0},p(l,o){e=l;const a={};o&4&&(a.toast=e[11]),o&4&&(a.setHeight=i),n.$set(a)},i(l){s||(b(n.$$.fragment,l),s=!0)},o(l){y(n.$$.fragment,l),s=!1},d(l){l&&h(t),M(n,l)}}}function xr(r){let e,t=[],n=new Map,s,i,l,o,a=r[2];const c=f=>f[11].id;for(let f=0;f<a.length;f+=1){let d=kt(r,a,f),g=c(d);n.set(g,t[f]=wt(g,d))}return{c(){e=E("div");for(let f=0;f<t.length;f+=1)t[f].c();this.h()},l(f){e=C(f,"DIV",{class:!0,style:!0});var d=v(e);for(let g=0;g<t.length;g+=1)t[g].l(d);d.forEach(h),this.h()},h(){m(e,"class",s="toaster "+(r[1]||"")+" svelte-1phplh9"),m(e,"style",r[0])},m(f,d){k(f,e,d);for(let g=0;g<t.length;g+=1)t[g]&&t[g].m(e,null);i=!0,l||(o=[se(e,"mouseenter",r[4].startPause),se(e,"mouseleave",r[4].endPause)],l=!0)},p(f,[d]){d&20&&(a=f[2],X(),t=Re(t,d,c,1,f,a,n,e,rt,wt,null,kt),Y()),(!i||d&2&&s!==(s="toaster "+(f[1]||"")+" svelte-1phplh9"))&&m(e,"class",s),(!i||d&1)&&m(e,"style",f[0])},i(f){if(!i){for(let d=0;d<a.length;d+=1)b(t[d]);i=!0}},o(f){for(let d=0;d<t.length;d+=1)y(t[d]);i=!1},d(f){f&&h(e);for(let d=0;d<t.length;d+=1)t[d].d();l=!1,nt(o)}}}function $r(r,e,t){let n,{reverseOrder:s=!1}=e,{position:i="top-center"}=e,{toastOptions:l=void 0}=e,{gutter:o=8}=e,{containerStyle:a=void 0}=e,{containerClassName:c=void 0}=e;const{toasts:f,handlers:d}=gr(l);x(r,f,p=>t(9,n=p));let g;const u=(p,w)=>d.updateHeight(p.id,w);return r.$$set=p=>{"reverseOrder"in p&&t(5,s=p.reverseOrder),"position"in p&&t(6,i=p.position),"toastOptions"in p&&t(7,l=p.toastOptions),"gutter"in p&&t(8,o=p.gutter),"containerStyle"in p&&t(0,a=p.containerStyle),"containerClassName"in p&&t(1,c=p.containerClassName)},r.$$.update=()=>{r.$$.dirty&864&&t(2,g=n.map(p=>({...p,position:p.position||i,offset:d.calculateOffset(p,n,{reverseOrder:s,gutter:o,defaultPosition:i})})))},[a,c,g,f,d,s,i,l,o,n,u]}class es extends A{constructor(e){super(),B(this,e,$r,xr,N,{reverseOrder:5,position:6,toastOptions:7,gutter:8,containerStyle:0,containerClassName:1})}}function ts(r){let e;return{c(){e=E("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){m(e,"class","blocker fixed opacity-40 bg-white block h-[100vh] w-[100vw]")},m(t,n){k(t,e,n)},p:S,i:S,o:S,d(t){t&&h(e)}}}class ns extends A{constructor(e){super(),B(this,e,null,ts,N,{})}}function rs(r){const e=le(r),{subscribe:t,set:n}=e;return{subscribe:t,store:s=>n(s),retrieve:()=>K(e),remove:()=>n(null)}}const F=rs(null);function ss(){const r=le(null),{subscribe:e,set:t}=r;return{subscribe:e,store:n=>t(n),retrieve:()=>K(r)}}const de=ss();function is(r){const e=le(r),{subscribe:t,set:n}=e;return{subscribe:t,store:s=>n(s)}}const ls=[],fn=is(ls),os=()=>{const r=pe.retrieve(),{bands:e,stretch:t}=oe.retrieve(),n=Object.values(e).join(","),s=Object.values(t).join(","),i=Un,l=de.retrieve().name;return`${r}/images/${l}/{z}/{x}/{y}.png?bands=${n}&stretch=${s}&palette=${i}`};let Xe;const Ue=()=>{const r=F.retrieve(),e=de.retrieve(),t=os();if(!r||!e)return;Xe&&r.removeLayer(Xe),Xe=L.tileLayer(t,qn).addTo(r);const n=L.latLng(e.bbox[1],e.bbox[0]),s=L.latLng(e.bbox[3],e.bbox[2]),i=L.latLngBounds(n,s);r.fitBounds(i)},ot=()=>{const r=oe.retrieve();Wn("options",r)},as=r=>{const{name:e,value:t}=r.target,n=Number(t);cs(e,n),Ue()},cs=(r,e)=>{fs(r,e),ot()},fs=(r,e)=>{oe.bands[r].store(e)},us=r=>{const e=le(r),{subscribe:t,set:n}=e;return{subscribe:t,store:s=>n(s),retrieve:()=>K(e)}},ds=Fn,qe=us(ds);function ms(){const r=le(hs),{subscribe:e,update:t,set:n}=r;return{subscribe:e,retrieve:()=>K(r),store:i=>n(i),add:i=>t(l=>[...l,i])}}const hs=[],me=ms();function gs(){const r=le({}),{subscribe:e,update:t}=r;return{subscribe:e,store:s=>{t(()=>s)},retrieve:()=>K(r)}}const ee=gs();function _s(){const r=le({}),{subscribe:e,set:t}=r;return{store:n=>t(n),retrieve:()=>K(r)}}const we=_s(),un=r=>{r.preventDefault()},dn=()=>{document.querySelector(".blocker").classList.add("z-[999]"),document.addEventListener("keydown",un)},Ve=()=>{document.querySelector(".blocker").classList.remove("z-[999]"),document.removeEventListener("keydown",un)},bs=()=>{document.querySelector('[title="Cancel drawing"]').click()},je=0,ps=1,vs=r=>{const e=ee.retrieve().name;if(r)return r.getLayers().filter(t=>{var n,s;return((s=(n=t.feature)==null?void 0:n.properties)==null?void 0:s.label)===e})},Ls=r=>{if(r)return r.map(e=>{const{lat:t,lng:n}=e._latlng;return[n,t]})},ys=r=>{if(r)return r.map(e=>{var t,n;return((n=(t=e.feature)==null?void 0:t.properties)==null?void 0:n.background)===je?je:ps})},ks=()=>{const r=document.querySelector('[title="Cancel editing, discards all changes"]');r&&r.click()},ws=()=>window.confirm("Do you want to save your progress?"),Et=r=>r.charAt(0).toUpperCase()+r.slice(1).toLocaleLowerCase(),Ct=(r,e)=>{Object.keys(e).forEach(t=>{r.addLayer(e[t])})},Es=(r,e)=>{const t=Object.values(e);r&&(t.some(n=>n===null)||Object.keys(e).forEach(n=>{r==null||r.removeLayer(e[n])}))};function Cs(r){const e=le(r),{subscribe:t,set:n}=e,s=f=>{const d={rectangles:L.featureGroup(),multipolygons:L.featureGroup(),points:L.featureGroup(),samPrompts:L.featureGroup()};Ct(f,d),n(d)},i=f=>{const d=K(e);Es(f,d),n(null)};return{subscribe:t,init:s,remove:i,clear:f=>{i(f),s(f)},retrieve:()=>K(e),addLayerWithProperties:(f,d,g)=>(f.feature={type:"Feature",properties:d},K(e)[g].addLayer(f),f),resetLayerGroup:(f,d)=>{const g=K(e);g[d]=new L.FeatureGroup,Ct(f,g),n(g)},removeLayer:(f,d)=>{K(e)[d].removeLayer(f)}}}const Ss={rectangles:null,multipolygons:null,points:null,samPrompts:null},U=Cs(Ss);function Is(){const r=le(St),{subscribe:e,update:t,set:n}=r;return{subscribe:e,store:l=>{t(()=>l)},retrieve:()=>K(r),empty:()=>n(St)}}const St=[],ge=Is();var ie=(r=>(r.rectangles="rectangles",r.multipolygons="multipolygons",r.points="points",r.samPrompts="samPrompts",r))(ie||{});const Ds=r=>{let t=0,n=0,s=0;r.length==4?(t="0x"+r[1]+r[1],n="0x"+r[2]+r[2],s="0x"+r[3]+r[3]):r.length==7&&(t="0x"+r[1]+r[2],n="0x"+r[3]+r[4],s="0x"+r[5]+r[6]),t/=255,n/=255,s/=255;let i=Math.min(t,n,s),l=Math.max(t,n,s),o=l-i,a=0;return o==0?a=0:l==t?a=(n-s)/o%6:l==n?a=(s-t)/o+2:a=(t-n)/o+4,a=Math.round(a*60),a-=206,a<0&&(a+=360),a},We=r=>r.reduce((t,{name:n,color:s})=>(t[n]=s,t),{}),mn=async(r,e)=>{const t=We(me.retrieve()),n=Ds(t[e]),s=r.getElement();if(!s)return;const i=e.replace(/\s/g,"");s.classList.add(`${i}-marker`);const l=`hue-rotate(${n}deg)`;s.style.setProperty("filter",l),s.style.setProperty("opacity","0");const o=ee.retrieve().name;e===o&&s.style.setProperty("opacity","1")},Ms=()=>{const r=le({areImagesLoading:!0,areLabelsLoading:!0,areAnnotationsLoading:!0}),{subscribe:e,update:t}=r;return{subscribe:e,markImagesAsLoaded:()=>t(f=>({...f,areImagesLoading:!1})),markLabelsAsLoaded:()=>t(f=>({...f,areLabelsLoading:!1})),markAnnotationsAsLoaded:()=>t(f=>({...f,areAnnotationsLoading:!1})),markLabelsAsLoading:()=>t(f=>({...f,areLabelsLoading:!0})),markImagesAsLoading:()=>t(f=>({...f,areImagesLoading:!0})),markAnnotationsAsLoading:()=>t(f=>({...f,areAnnotationsLoading:!0})),isDataLoading:()=>{const f=K(r);return f.areImagesLoading||f.areLabelsLoading},retrieve:()=>K(r)}},Ee=Ms(),Ts={saving:!1,samMaskRequest:!1},Ps=()=>{const r=le(Ts),{update:e,subscribe:t,set:n}=r;return{subscribe:t,saving:{enable:()=>e(s=>({...s,saving:!0})),disable:()=>e(s=>({...s,saving:!1})),retrieve:()=>K(r).saving},samMaskRequest:{enable:()=>e(s=>({...s,samMaskRequest:!0})),disable:()=>e(s=>({...s,samMaskRequest:!1})),retrieve:()=>K(r).samMaskRequest}}},$=Ps(),As=r=>{const e=ee.retrieve().name;r===e&&$.samMaskRequest.enable()},hn=async(r,e,t)=>{var a,c;const n=L.latLng(t,e),s=L.marker(n),i=U.addLayerWithProperties(s,r.properties,ie.samPrompts);if(!((a=r.properties)!=null&&a.label))return;const l=r.properties.label;if(mn(s,l),As(l),((c=r.properties)==null?void 0:c.background)!==je)return;await st(),i.getElement().classList.add("background-marker")},Bs=async(r,e,t)=>{var i;const n=L.latLng(t,e),s=L.marker(n,{opacity:0});ge.store((i=r.properties)==null?void 0:i.labels),U.addLayerWithProperties(s,r.properties,ie.points)},gn=r=>{const e=r.geometry,[t,n]=e.coordinates;return[t,n]},Ns=async r=>{var n,s;const[e,t]=gn(r);e&&t&&((n=r==null?void 0:r.properties)!=null&&n.prompt&&hn(r,e,t),(s=r==null?void 0:r.properties)!=null&&s.labels&&Bs(r,e,t))},at=(r={})=>{var e;Os(),(e=r==null?void 0:r.features)==null||e.forEach(t=>{var s,i,l;Vs(t);const n=(s=t==null?void 0:t.geometry)==null?void 0:s.type;if(n==="Point"){Ns(t);return}if((i=t.properties)!=null&&i.bbox){Hs(t);return}if(n==="Polygon"&&!((l=t.properties)!=null&&l.bbox)||n==="MultiPolygon"){zs(t);return}}),js()},Os=()=>{we.store([]),ge.store([])},Vs=r=>{var t,n,s;const e=We(me.retrieve());if((t=r.properties)!=null&&t.label&&!e[(n=r.properties)==null?void 0:n.label]){It(r.properties.label);return}if((s=r.properties)!=null&&s.labels)for(const i of r.properties.labels){if(e[i])return;It(i)}},It=r=>{const e=we.retrieve();e.includes(r)||we.store([...e,r])},js=()=>{const r=we.retrieve();r.length&&re.error(`There are undefined labels: ${r.join(", ")}`)},Hs=async r=>{var s,i;const e=L.rectangle((s=r.properties)==null?void 0:s.bbox),t=We(me.retrieve()),n=oe.opacity.retrieve();e.options.color=t[(i=r.properties)==null?void 0:i.label],e.options.weight=rn,e.options.fillOpacity=n,U.addLayerWithProperties(e,r.properties,ie.rectangles)},zs=async r=>{var i;const e=Rs(r),t=We(me.retrieve()),n=oe.opacity.retrieve(),s=L.geoJSON(e,{style:{color:t[(i=r.properties)==null?void 0:i.label],weight:rn,fillOpacity:n}});U.addLayerWithProperties(s,r.properties,ie.multipolygons)},Rs=r=>{const e=r.geometry;return e.type==="MultiPolygon"?r:{...r,feature:{geometry:{type:"MultiPolygon"},coordinates:[e.coordinates]}}},_n=()=>{const r=F.retrieve();U.clear(r);const e=qe.retrieve();at(e)},Gs=r=>{const{value:e}=r.target,t=Number(e);Us(t),_n()},Us=r=>{qs(r),ot()},qs=r=>{const e=r/100;oe.opacity.store(e)},Ws=r=>{const{name:e,value:t}=r.target,n=Number(t);Fs(e,n),Ue()},Fs=(r,e)=>{Js(r,e),ot()},Js=(r,e)=>{oe.stretch[r].store(e)};function Zs(r){let e,t,n,s,i,l,o,a,c,f,d,g,u,p,w,T,Q,P,V,ue,ce,Me,he,_e,Je,Ze,fe,Te,Qe,ft;return{c(){e=E("section"),t=E("legend"),n=E("span"),s=q("RGB bands"),i=j(),l=E("fieldset"),o=E("input"),a=j(),c=E("input"),f=j(),d=E("input"),g=j(),u=E("section"),p=E("legend"),w=E("span"),T=q("Stretch"),Q=j(),P=E("fieldset"),V=E("input"),ue=j(),ce=E("input"),Me=j(),he=E("section"),_e=E("label"),Je=q("Layer opacity"),Ze=j(),fe=E("input"),this.h()},l(z){e=C(z,"SECTION",{});var ne=v(e);t=C(ne,"LEGEND",{class:!0});var ut=v(t);n=C(ut,"SPAN",{});var dt=v(n);s=W(dt,"RGB bands"),dt.forEach(h),ut.forEach(h),i=H(ne),l=C(ne,"FIELDSET",{class:!0});var Le=v(l);o=C(Le,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),a=H(Le),c=C(Le,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),f=H(Le),d=C(Le,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),Le.forEach(h),ne.forEach(h),g=H(z),u=C(z,"SECTION",{});var Pe=v(u);p=C(Pe,"LEGEND",{class:!0});var mt=v(p);w=C(mt,"SPAN",{});var ht=v(w);T=W(ht,"Stretch"),ht.forEach(h),mt.forEach(h),Q=H(Pe),P=C(Pe,"FIELDSET",{class:!0});var Ae=v(P);V=C(Ae,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),ue=H(Ae),ce=C(Ae,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),Ae.forEach(h),Pe.forEach(h),Me=H(z),he=C(z,"SECTION",{class:!0});var Be=v(he);_e=C(Be,"LABEL",{for:!0,class:!0});var gt=v(_e);Je=W(gt,"Layer opacity"),gt.forEach(h),Ze=H(Be),fe=C(Be,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),Be.forEach(h),this.h()},h(){m(t,"class","label"),o.required=!0,m(o,"type","number"),m(o,"placeholder","R"),m(o,"name","red"),m(o,"class","text-center input input-bordered input-error w-full max-w-xs svelte-7yy2hn"),o.value=r[0],c.required=!0,m(c,"type","number"),m(c,"placeholder","G"),m(c,"name","green"),m(c,"class","text-center input input-bordered input-success w-full max-w-xs svelte-7yy2hn"),c.value=r[1],d.required=!0,m(d,"type","number"),m(d,"placeholder","B"),m(d,"name","blue"),m(d,"class","text-center input input-bordered input-info w-full max-w-xs svelte-7yy2hn"),d.value=r[2],m(l,"class","flex gap-3"),m(p,"class","label"),V.required=!0,m(V,"type","number"),m(V,"placeholder","Minimum"),m(V,"name","minimum"),m(V,"class","input input-bordered w-full max-w-xs svelte-7yy2hn"),V.value=r[3],ce.required=!0,m(ce,"type","number"),m(ce,"placeholder","Maximum"),m(ce,"name","maximum"),m(ce,"class","input input-bordered w-full max-w-xs svelte-7yy2hn"),ce.value=r[4],m(P,"class","flex gap-3"),m(_e,"for","opacity-range"),m(_e,"class","label"),m(fe,"id","opacity-range"),m(fe,"type","range"),m(fe,"min","0"),m(fe,"max","100"),fe.value=Te=r[5]*100,m(fe,"class","range range-primary svelte-7yy2hn"),m(he,"class","flex flex-col gap-3")},m(z,ne){k(z,e,ne),_(e,t),_(t,n),_(n,s),_(e,i),_(e,l),_(l,o),_(l,a),_(l,c),_(l,f),_(l,d),k(z,g,ne),k(z,u,ne),_(u,p),_(p,w),_(w,T),_(u,Q),_(u,P),_(P,V),_(P,ue),_(P,ce),k(z,Me,ne),k(z,he,ne),_(he,_e),_(_e,Je),_(he,Ze),_(he,fe),Qe||(ft=[se(l,"input",as),se(P,"input",Ws),se(fe,"input",Gs)],Qe=!0)},p(z,ne){ne&1&&o.value!==z[0]&&(o.value=z[0]),ne&2&&c.value!==z[1]&&(c.value=z[1]),ne&4&&d.value!==z[2]&&(d.value=z[2]),ne&8&&V.value!==z[3]&&(V.value=z[3]),ne&16&&ce.value!==z[4]&&(ce.value=z[4]),ne&32&&Te!==(Te=z[5]*100)&&(fe.value=Te)},d(z){z&&h(e),z&&h(g),z&&h(u),z&&h(Me),z&&h(he),Qe=!1,nt(ft)}}}function Qs(r){let e,t=oe&&Zs(r);return{c(){e=E("form"),t&&t.c(),this.h()},l(n){e=C(n,"FORM",{class:!0,id:!0});var s=v(e);t&&t.l(s),s.forEach(h),this.h()},h(){m(e,"class","form-control w-full max-w-xs flex flex-col gap-5 items text-xl"),m(e,"id","bands-and-stretch")},m(n,s){k(n,e,s),t&&t.m(e,null)},p(n,[s]){oe&&t.p(n,s)},i:S,o:S,d(n){n&&h(e),t&&t.d()}}}function Xs(r,e,t){let n;x(r,oe,f=>t(6,n=f));let s,i,l,o,a,c;return r.$$.update=()=>{r.$$.dirty&64&&t(0,{bands:{red:s,green:i,blue:l},stretch:{minimum:o,maximum:a},opacity:c}=n,s,(t(1,i),t(6,n)),(t(2,l),t(6,n)),(t(3,o),t(6,n)),(t(4,a),t(6,n)),(t(5,c),t(6,n)))},[s,i,l,o,a,c,n]}class Ys extends A{constructor(e){super(),B(this,e,Xs,Qs,N,{})}}function Dt(r){let e,t;return{c(){e=J("desc"),t=q(r[7])},l(n){e=Z(n,"desc",{});var s=v(e);t=W(s,r[7]),s.forEach(h)},m(n,s){k(n,e,s),_(e,t)},p(n,s){s&128&&te(t,n[7])},d(n){n&&h(e)}}}function Mt(r){let e,t;return{c(){e=J("title"),t=q(r[6])},l(n){e=Z(n,"title",{});var s=v(e);t=W(s,r[6]),s.forEach(h)},m(n,s){k(n,e,s),_(e,t)},p(n,s){s&64&&te(t,n[6])},d(n){n&&h(e)}}}function Ks(r){let e,t,n,s=r[7]&&Dt(r),i=r[6]&&Mt(r);return{c(){e=J("svg"),s&&s.c(),t=R(),i&&i.c(),n=J("path"),this.h()},l(l){e=Z(l,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var o=v(e);s&&s.l(o),t=R(),i&&i.l(o),n=Z(o,"path",{d:!0,fill:!0}),v(n).forEach(h),o.forEach(h),this.h()},h(){m(n,"d","M9,3L3.36,4.9C3.16,4.97 3,5.15 3,5.38V20.5A0.5,0.5 0 0,0 3.5,21C3.55,21 3.6,21 3.66,20.97L9,18.9L13.16,20.36C13.06,19.92 13,19.46 13,19C13,18.77 13,18.54 13.04,18.3L9,16.9V5L15,7.1V14.56C16.07,13.6 17.47,13 19,13C19.7,13 20.37,13.13 21,13.36V3.5A0.5,0.5 0 0,0 20.5,3H20.34L15,5.1L9,3M18,15V18H15V20H18V23H20V20H23V18H20V15H18Z"),m(n,"fill",r[2]),m(e,"viewBox",r[3]),m(e,"width",r[0]),m(e,"height",r[1]),m(e,"class",r[8]),m(e,"aria-label",r[4]),m(e,"aria-hidden",r[5])},m(l,o){k(l,e,o),s&&s.m(e,null),_(e,t),i&&i.m(e,null),_(e,n)},p(l,[o]){l[7]?s?s.p(l,o):(s=Dt(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l[6]?i?i.p(l,o):(i=Mt(l),i.c(),i.m(e,n)):i&&(i.d(1),i=null),o&4&&m(n,"fill",l[2]),o&8&&m(e,"viewBox",l[3]),o&1&&m(e,"width",l[0]),o&2&&m(e,"height",l[1]),o&256&&m(e,"class",l[8]),o&16&&m(e,"aria-label",l[4]),o&32&&m(e,"aria-hidden",l[5])},i:S,o:S,d(l){l&&h(e),s&&s.d(),i&&i.d()}}}function xs(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:i=n}=e,{color:l="currentColor"}=e,{viewBox:o="0 0 24 24"}=e,{ariaLabel:a=void 0}=e,{ariaHidden:c=void 0}=e,{title:f=void 0}=e,{desc:d=void 0}=e,{class:g=void 0}=e;return r.$$set=u=>{"size"in u&&t(9,n=u.size),"width"in u&&t(0,s=u.width),"height"in u&&t(1,i=u.height),"color"in u&&t(2,l=u.color),"viewBox"in u&&t(3,o=u.viewBox),"ariaLabel"in u&&t(4,a=u.ariaLabel),"ariaHidden"in u&&t(5,c=u.ariaHidden),"title"in u&&t(6,f=u.title),"desc"in u&&t(7,d=u.desc),"class"in u&&t(8,g=u.class)},[s,i,l,o,a,c,f,d,g,n]}class $s extends A{constructor(e){super(),B(this,e,xs,Ks,N,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function Tt(r){let e,t;return{c(){e=J("desc"),t=q(r[7])},l(n){e=Z(n,"desc",{});var s=v(e);t=W(s,r[7]),s.forEach(h)},m(n,s){k(n,e,s),_(e,t)},p(n,s){s&128&&te(t,n[7])},d(n){n&&h(e)}}}function Pt(r){let e,t;return{c(){e=J("title"),t=q(r[6])},l(n){e=Z(n,"title",{});var s=v(e);t=W(s,r[6]),s.forEach(h)},m(n,s){k(n,e,s),_(e,t)},p(n,s){s&64&&te(t,n[6])},d(n){n&&h(e)}}}function ei(r){let e,t,n,s=r[7]&&Tt(r),i=r[6]&&Pt(r);return{c(){e=J("svg"),s&&s.c(),t=R(),i&&i.c(),n=J("path"),this.h()},l(l){e=Z(l,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var o=v(e);s&&s.l(o),t=R(),i&&i.l(o),n=Z(o,"path",{d:!0,fill:!0}),v(n).forEach(h),o.forEach(h),this.h()},h(){m(n,"d","M12,1C7.59,1 4,4.59 4,9C4,14.57 10.96,22.34 11.26,22.67L12,23.5L12.74,22.67C13.04,22.34 20,14.57 20,9C20,4.59 16.41,1 12,1M12,20.47C9.82,17.86 6,12.54 6,9A6,6 0 0,1 12,3A6,6 0 0,1 18,9C18,12.83 13.75,18.36 12,20.47M11.13,14H12.88V15.75H11.13M12,5A3.5,3.5 0 0,0 8.5,8.5H10.25A1.75,1.75 0 0,1 12,6.75A1.75,1.75 0 0,1 13.75,8.5C13.75,10.26 11.13,10.04 11.13,12.88H12.88C12.88,10.91 15.5,10.69 15.5,8.5A3.5,3.5 0 0,0 12,5Z"),m(n,"fill",r[2]),m(e,"viewBox",r[3]),m(e,"width",r[0]),m(e,"height",r[1]),m(e,"class",r[8]),m(e,"aria-label",r[4]),m(e,"aria-hidden",r[5])},m(l,o){k(l,e,o),s&&s.m(e,null),_(e,t),i&&i.m(e,null),_(e,n)},p(l,[o]){l[7]?s?s.p(l,o):(s=Tt(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l[6]?i?i.p(l,o):(i=Pt(l),i.c(),i.m(e,n)):i&&(i.d(1),i=null),o&4&&m(n,"fill",l[2]),o&8&&m(e,"viewBox",l[3]),o&1&&m(e,"width",l[0]),o&2&&m(e,"height",l[1]),o&256&&m(e,"class",l[8]),o&16&&m(e,"aria-label",l[4]),o&32&&m(e,"aria-hidden",l[5])},i:S,o:S,d(l){l&&h(e),s&&s.d(),i&&i.d()}}}function ti(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:i=n}=e,{color:l="currentColor"}=e,{viewBox:o="0 0 24 24"}=e,{ariaLabel:a=void 0}=e,{ariaHidden:c=void 0}=e,{title:f=void 0}=e,{desc:d=void 0}=e,{class:g=void 0}=e;return r.$$set=u=>{"size"in u&&t(9,n=u.size),"width"in u&&t(0,s=u.width),"height"in u&&t(1,i=u.height),"color"in u&&t(2,l=u.color),"viewBox"in u&&t(3,o=u.viewBox),"ariaLabel"in u&&t(4,a=u.ariaLabel),"ariaHidden"in u&&t(5,c=u.ariaHidden),"title"in u&&t(6,f=u.title),"desc"in u&&t(7,d=u.desc),"class"in u&&t(8,g=u.class)},[s,i,l,o,a,c,f,d,g,n]}class ni extends A{constructor(e){super(),B(this,e,ti,ei,N,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function At(r){let e,t;return{c(){e=J("desc"),t=q(r[7])},l(n){e=Z(n,"desc",{});var s=v(e);t=W(s,r[7]),s.forEach(h)},m(n,s){k(n,e,s),_(e,t)},p(n,s){s&128&&te(t,n[7])},d(n){n&&h(e)}}}function Bt(r){let e,t;return{c(){e=J("title"),t=q(r[6])},l(n){e=Z(n,"title",{});var s=v(e);t=W(s,r[6]),s.forEach(h)},m(n,s){k(n,e,s),_(e,t)},p(n,s){s&64&&te(t,n[6])},d(n){n&&h(e)}}}function ri(r){let e,t,n,s=r[7]&&At(r),i=r[6]&&Bt(r);return{c(){e=J("svg"),s&&s.c(),t=R(),i&&i.c(),n=J("path"),this.h()},l(l){e=Z(l,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var o=v(e);s&&s.l(o),t=R(),i&&i.l(o),n=Z(o,"path",{d:!0,fill:!0}),v(n).forEach(h),o.forEach(h),this.h()},h(){m(n,"d","M21.41,11.58L12.41,2.58C12.04,2.21 11.53,2 11,2H4A2,2 0 0,0 2,4V11C2,11.53 2.21,12.04 2.59,12.41L3,12.81C3.9,12.27 4.94,12 6,12A6,6 0 0,1 12,18C12,19.06 11.72,20.09 11.18,21L11.58,21.4C11.95,21.78 12.47,22 13,22C13.53,22 14.04,21.79 14.41,21.41L21.41,14.41C21.79,14.04 22,13.53 22,13C22,12.47 21.79,11.96 21.41,11.58M5.5,7A1.5,1.5 0 0,1 4,5.5A1.5,1.5 0 0,1 5.5,4A1.5,1.5 0 0,1 7,5.5A1.5,1.5 0 0,1 5.5,7M10,19H7V22H5V19H2V17H5V14H7V17H10V19Z"),m(n,"fill",r[2]),m(e,"viewBox",r[3]),m(e,"width",r[0]),m(e,"height",r[1]),m(e,"class",r[8]),m(e,"aria-label",r[4]),m(e,"aria-hidden",r[5])},m(l,o){k(l,e,o),s&&s.m(e,null),_(e,t),i&&i.m(e,null),_(e,n)},p(l,[o]){l[7]?s?s.p(l,o):(s=At(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l[6]?i?i.p(l,o):(i=Bt(l),i.c(),i.m(e,n)):i&&(i.d(1),i=null),o&4&&m(n,"fill",l[2]),o&8&&m(e,"viewBox",l[3]),o&1&&m(e,"width",l[0]),o&2&&m(e,"height",l[1]),o&256&&m(e,"class",l[8]),o&16&&m(e,"aria-label",l[4]),o&32&&m(e,"aria-hidden",l[5])},i:S,o:S,d(l){l&&h(e),s&&s.d(),i&&i.d()}}}function si(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:i=n}=e,{color:l="currentColor"}=e,{viewBox:o="0 0 24 24"}=e,{ariaLabel:a=void 0}=e,{ariaHidden:c=void 0}=e,{title:f=void 0}=e,{desc:d=void 0}=e,{class:g=void 0}=e;return r.$$set=u=>{"size"in u&&t(9,n=u.size),"width"in u&&t(0,s=u.width),"height"in u&&t(1,i=u.height),"color"in u&&t(2,l=u.color),"viewBox"in u&&t(3,o=u.viewBox),"ariaLabel"in u&&t(4,a=u.ariaLabel),"ariaHidden"in u&&t(5,c=u.ariaHidden),"title"in u&&t(6,f=u.title),"desc"in u&&t(7,d=u.desc),"class"in u&&t(8,g=u.class)},[s,i,l,o,a,c,f,d,g,n]}class ii extends A{constructor(e){super(),B(this,e,si,ri,N,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function Nt(r){let e,t;return{c(){e=J("desc"),t=q(r[7])},l(n){e=Z(n,"desc",{});var s=v(e);t=W(s,r[7]),s.forEach(h)},m(n,s){k(n,e,s),_(e,t)},p(n,s){s&128&&te(t,n[7])},d(n){n&&h(e)}}}function Ot(r){let e,t;return{c(){e=J("title"),t=q(r[6])},l(n){e=Z(n,"title",{});var s=v(e);t=W(s,r[6]),s.forEach(h)},m(n,s){k(n,e,s),_(e,t)},p(n,s){s&64&&te(t,n[6])},d(n){n&&h(e)}}}function li(r){let e,t,n,s=r[7]&&Nt(r),i=r[6]&&Ot(r);return{c(){e=J("svg"),s&&s.c(),t=R(),i&&i.c(),n=J("path"),this.h()},l(l){e=Z(l,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var o=v(e);s&&s.l(o),t=R(),i&&i.l(o),n=Z(o,"path",{d:!0,fill:!0}),v(n).forEach(h),o.forEach(h),this.h()},h(){m(n,"d","M7.5,5.6L5,7L6.4,4.5L5,2L7.5,3.4L10,2L8.6,4.5L10,7L7.5,5.6M19.5,15.4L22,14L20.6,16.5L22,19L19.5,17.6L17,19L18.4,16.5L17,14L19.5,15.4M22,2L20.6,4.5L22,7L19.5,5.6L17,7L18.4,4.5L17,2L19.5,3.4L22,2M13.34,12.78L15.78,10.34L13.66,8.22L11.22,10.66L13.34,12.78M14.37,7.29L16.71,9.63C17.1,10 17.1,10.65 16.71,11.04L5.04,22.71C4.65,23.1 4,23.1 3.63,22.71L1.29,20.37C0.9,20 0.9,19.35 1.29,18.96L12.96,7.29C13.35,6.9 14,6.9 14.37,7.29Z"),m(n,"fill",r[2]),m(e,"viewBox",r[3]),m(e,"width",r[0]),m(e,"height",r[1]),m(e,"class",r[8]),m(e,"aria-label",r[4]),m(e,"aria-hidden",r[5])},m(l,o){k(l,e,o),s&&s.m(e,null),_(e,t),i&&i.m(e,null),_(e,n)},p(l,[o]){l[7]?s?s.p(l,o):(s=Nt(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l[6]?i?i.p(l,o):(i=Ot(l),i.c(),i.m(e,n)):i&&(i.d(1),i=null),o&4&&m(n,"fill",l[2]),o&8&&m(e,"viewBox",l[3]),o&1&&m(e,"width",l[0]),o&2&&m(e,"height",l[1]),o&256&&m(e,"class",l[8]),o&16&&m(e,"aria-label",l[4]),o&32&&m(e,"aria-hidden",l[5])},i:S,o:S,d(l){l&&h(e),s&&s.d(),i&&i.d()}}}function oi(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:i=n}=e,{color:l="currentColor"}=e,{viewBox:o="0 0 24 24"}=e,{ariaLabel:a=void 0}=e,{ariaHidden:c=void 0}=e,{title:f=void 0}=e,{desc:d=void 0}=e,{class:g=void 0}=e;return r.$$set=u=>{"size"in u&&t(9,n=u.size),"width"in u&&t(0,s=u.width),"height"in u&&t(1,i=u.height),"color"in u&&t(2,l=u.color),"viewBox"in u&&t(3,o=u.viewBox),"ariaLabel"in u&&t(4,a=u.ariaLabel),"ariaHidden"in u&&t(5,c=u.ariaHidden),"title"in u&&t(6,f=u.title),"desc"in u&&t(7,d=u.desc),"class"in u&&t(8,g=u.class)},[s,i,l,o,a,c,f,d,g,n]}class ai extends A{constructor(e){super(),B(this,e,oi,li,N,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function Vt(r){let e,t;return{c(){e=J("desc"),t=q(r[7])},l(n){e=Z(n,"desc",{});var s=v(e);t=W(s,r[7]),s.forEach(h)},m(n,s){k(n,e,s),_(e,t)},p(n,s){s&128&&te(t,n[7])},d(n){n&&h(e)}}}function jt(r){let e,t;return{c(){e=J("title"),t=q(r[6])},l(n){e=Z(n,"title",{});var s=v(e);t=W(s,r[6]),s.forEach(h)},m(n,s){k(n,e,s),_(e,t)},p(n,s){s&64&&te(t,n[6])},d(n){n&&h(e)}}}function ci(r){let e,t,n,s=r[7]&&Vt(r),i=r[6]&&jt(r);return{c(){e=J("svg"),s&&s.c(),t=R(),i&&i.c(),n=J("path"),this.h()},l(l){e=Z(l,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var o=v(e);s&&s.l(o),t=R(),i&&i.l(o),n=Z(o,"path",{d:!0,fill:!0}),v(n).forEach(h),o.forEach(h),this.h()},h(){m(n,"d","M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z"),m(n,"fill",r[2]),m(e,"viewBox",r[3]),m(e,"width",r[0]),m(e,"height",r[1]),m(e,"class",r[8]),m(e,"aria-label",r[4]),m(e,"aria-hidden",r[5])},m(l,o){k(l,e,o),s&&s.m(e,null),_(e,t),i&&i.m(e,null),_(e,n)},p(l,[o]){l[7]?s?s.p(l,o):(s=Vt(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l[6]?i?i.p(l,o):(i=jt(l),i.c(),i.m(e,n)):i&&(i.d(1),i=null),o&4&&m(n,"fill",l[2]),o&8&&m(e,"viewBox",l[3]),o&1&&m(e,"width",l[0]),o&2&&m(e,"height",l[1]),o&256&&m(e,"class",l[8]),o&16&&m(e,"aria-label",l[4]),o&32&&m(e,"aria-hidden",l[5])},i:S,o:S,d(l){l&&h(e),s&&s.d(),i&&i.d()}}}function fi(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:i=n}=e,{color:l="currentColor"}=e,{viewBox:o="0 0 24 24"}=e,{ariaLabel:a=void 0}=e,{ariaHidden:c=void 0}=e,{title:f=void 0}=e,{desc:d=void 0}=e,{class:g=void 0}=e;return r.$$set=u=>{"size"in u&&t(9,n=u.size),"width"in u&&t(0,s=u.width),"height"in u&&t(1,i=u.height),"color"in u&&t(2,l=u.color),"viewBox"in u&&t(3,o=u.viewBox),"ariaLabel"in u&&t(4,a=u.ariaLabel),"ariaHidden"in u&&t(5,c=u.ariaHidden),"title"in u&&t(6,f=u.title),"desc"in u&&t(7,d=u.desc),"class"in u&&t(8,g=u.class)},[s,i,l,o,a,c,f,d,g,n]}class ui extends A{constructor(e){super(),B(this,e,fi,ci,N,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}const ct=()=>{const r=U.retrieve(),{rectangles:e,multipolygons:t,points:n,samPrompts:s}=r;return L.layerGroup([e,t,n,s]).toGeoJSON()},Fe=r=>{qe.store(r)},di=pe.retrieve(),{samEndpoint:mi}=Ie,hi=async()=>{const r=ct();Fe(r),bs();const e=gi(),{promise:t,errorMessage:n}=_i(e);ki(t,n)},gi=()=>{const{samPrompts:r}=U.retrieve(),e=vs(r),t=Ls(e),n=ys(e),s=de.retrieve().name,i=ee.retrieve().name,{bands:l,stretch:o}=oe.retrieve();return JSON.stringify({points:t,pointsLabel:n,image:s,label:i,bands:{bands:l,stretch:o}})},_i=r=>{let e=sn;return{promise:new Promise(async(n,s)=>{dn();try{const i=await bi(r);if(!i.ok)throw e===e&&(e=i.statusText),new Error;const l=await i.json();pi(l),n()}catch{Ve(),s()}}),errorMessage:e}},bi=async r=>await fetch(di+mi,{method:"POST",headers:{"Content-Type":"application/json"},body:r}),pi=r=>{const e=vi(r);yi(),at(e),Ve()},vi=r=>{const e=Li();return{...e,features:[...e.features,...r.features]}},Li=()=>{var s;const r=ee.retrieve().name,e=qe.retrieve(),t=(s=e==null?void 0:e.features)==null?void 0:s.filter(i=>{var l;return i.geometry.type!=="MultiPolygon"||((l=i.properties)==null?void 0:l.label)!==r});return{...e,features:t}},yi=()=>{const r=K(F);U.clear(r)},ki=(r,e)=>{re.promise(r,{loading:Jn,success:Zn,error:()=>e})};function Ht(r){let e,t;return{c(){e=J("desc"),t=q(r[7])},l(n){e=Z(n,"desc",{});var s=v(e);t=W(s,r[7]),s.forEach(h)},m(n,s){k(n,e,s),_(e,t)},p(n,s){s&128&&te(t,n[7])},d(n){n&&h(e)}}}function zt(r){let e,t;return{c(){e=J("title"),t=q(r[6])},l(n){e=Z(n,"title",{});var s=v(e);t=W(s,r[6]),s.forEach(h)},m(n,s){k(n,e,s),_(e,t)},p(n,s){s&64&&te(t,n[6])},d(n){n&&h(e)}}}function wi(r){let e,t,n,s=r[7]&&Ht(r),i=r[6]&&zt(r);return{c(){e=J("svg"),s&&s.c(),t=R(),i&&i.c(),n=J("path"),this.h()},l(l){e=Z(l,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var o=v(e);s&&s.l(o),t=R(),i&&i.l(o),n=Z(o,"path",{d:!0,fill:!0}),v(n).forEach(h),o.forEach(h),this.h()},h(){m(n,"d","M21.41 11.58L12.41 2.58C12.04 2.21 11.53 2 11 2H4C2.9 2 2 2.9 2 4V11C2 11.53 2.21 12.04 2.59 12.41L3 12.81C3.9 12.27 4.94 12 6 12C9.31 12 12 14.69 12 18C12 19.06 11.72 20.09 11.18 21L11.58 21.4C11.95 21.78 12.47 22 13 22S14.04 21.79 14.41 21.41L21.41 14.41C21.79 14.04 22 13.53 22 13S21.79 11.96 21.41 11.58M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7M8.63 14.27L4.76 18.17L3.41 16.8L2 18.22L4.75 21L10.03 15.68L8.63 14.27"),m(n,"fill",r[2]),m(e,"viewBox",r[3]),m(e,"width",r[0]),m(e,"height",r[1]),m(e,"class",r[8]),m(e,"aria-label",r[4]),m(e,"aria-hidden",r[5])},m(l,o){k(l,e,o),s&&s.m(e,null),_(e,t),i&&i.m(e,null),_(e,n)},p(l,[o]){l[7]?s?s.p(l,o):(s=Ht(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l[6]?i?i.p(l,o):(i=zt(l),i.c(),i.m(e,n)):i&&(i.d(1),i=null),o&4&&m(n,"fill",l[2]),o&8&&m(e,"viewBox",l[3]),o&1&&m(e,"width",l[0]),o&2&&m(e,"height",l[1]),o&256&&m(e,"class",l[8]),o&16&&m(e,"aria-label",l[4]),o&32&&m(e,"aria-hidden",l[5])},i:S,o:S,d(l){l&&h(e),s&&s.d(),i&&i.d()}}}function Ei(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:i=n}=e,{color:l="currentColor"}=e,{viewBox:o="0 0 24 24"}=e,{ariaLabel:a=void 0}=e,{ariaHidden:c=void 0}=e,{title:f=void 0}=e,{desc:d=void 0}=e,{class:g=void 0}=e;return r.$$set=u=>{"size"in u&&t(9,n=u.size),"width"in u&&t(0,s=u.width),"height"in u&&t(1,i=u.height),"color"in u&&t(2,l=u.color),"viewBox"in u&&t(3,o=u.viewBox),"ariaLabel"in u&&t(4,a=u.ariaLabel),"ariaHidden"in u&&t(5,c=u.ariaHidden),"title"in u&&t(6,f=u.title),"desc"in u&&t(7,d=u.desc),"class"in u&&t(8,g=u.class)},[s,i,l,o,a,c,f,d,g,n]}class bn extends A{constructor(e){super(),B(this,e,Ei,wi,N,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}const Ci=()=>{Si();const r=Ii();Di(r)},Si=()=>{const r=ct();Fe(r),U.retrieve().samPrompts.getLayers().forEach(t=>{U.removeLayer(t,ie.samPrompts)})},Ii=()=>{var t;const r=qe.retrieve();return{...r,features:(t=r==null?void 0:r.features)==null?void 0:t.filter(n=>{var s;return(s=n.properties)==null?void 0:s.prompt})}},Di=r=>{var e;if((e=r.features)!=null&&e.length)for(const t of r.features){const[n,s]=gn(t);if(!(n&&s))return;hn(t,n,s)}},pn=r=>{ee.retrieve().name!==r.name&&(ee.store(r),Ci())};function Rt(r,e,t){const n=r.slice();return n[4]=e[t],n}function Gt(r){let e,t,n;return t=new bn({props:{color:"#202124"}}),{c(){e=E("i"),I(t.$$.fragment),this.h()},l(s){e=C(s,"I",{class:!0});var i=v(e);O(t.$$.fragment,i),i.forEach(h),this.h()},h(){m(e,"class","text-2xl hover:text-3xl mr-2")},m(s,i){k(s,e,i),D(t,e,null),n=!0},i(s){n||(b(t.$$.fragment,s),n=!0)},o(s){y(t.$$.fragment,s),n=!1},d(s){s&&h(e),M(t)}}}function Ut(r,e){let t,n=Et(e[4].name)+"",s,i,l,o=e[2].includes(e[4].name),a,c,f,d,g,u,p,w,T=o&&Gt();function Q(){return e[3](e[4])}return{key:r,first:null,c(){t=E("button"),s=q(n),i=j(),l=E("div"),T&&T.c(),a=j(),c=E("div"),d=j(),this.h()},l(P){t=C(P,"BUTTON",{class:!0});var V=v(t);s=W(V,n),i=H(V),l=C(V,"DIV",{class:!0});var ue=v(l);T&&T.l(ue),a=H(ue),c=C(ue,"DIV",{class:!0,style:!0}),v(c).forEach(h),ue.forEach(h),d=H(V),V.forEach(h),this.h()},h(){m(c,"class","w-[65px] h-[28px]"),m(c,"style",f=`background-color: ${e[4].color}70;
                        border: 1px solid ${e[4].color}50;`),m(l,"class","flex h-full items-center"),m(t,"class",g=`tab ${e[4].name===e[1].name&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`),this.first=t},m(P,V){k(P,t,V),_(t,s),_(t,i),_(t,l),T&&T.m(l,null),_(l,a),_(l,c),_(t,d),u=!0,p||(w=se(t,"click",Q),p=!0)},p(P,V){e=P,(!u||V&1)&&n!==(n=Et(e[4].name)+"")&&te(s,n),V&5&&(o=e[2].includes(e[4].name)),o?T?V&5&&b(T,1):(T=Gt(),T.c(),b(T,1),T.m(l,a)):T&&(X(),y(T,1,1,()=>{T=null}),Y()),(!u||V&1&&f!==(f=`background-color: ${e[4].color}70;
                        border: 1px solid ${e[4].color}50;`))&&m(c,"style",f),(!u||V&3&&g!==(g=`tab ${e[4].name===e[1].name&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`))&&m(t,"class",g)},i(P){u||(b(T),u=!0)},o(P){y(T),u=!1},d(P){P&&h(t),T&&T.d(),p=!1,w()}}}function Mi(r){let e,t=[],n=new Map,s,i=r[0];const l=o=>o[4].name;for(let o=0;o<i.length;o+=1){let a=Rt(r,i,o),c=l(a);n.set(c,t[o]=Ut(c,a))}return{c(){e=E("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=C(o,"DIV",{class:!0});var a=v(e);for(let c=0;c<t.length;c+=1)t[c].l(a);a.forEach(h),this.h()},h(){m(e,"class","flex flex-col flex-1 w-full")},m(o,a){k(o,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);s=!0},p(o,[a]){a&7&&(i=o[0],X(),t=Re(t,a,l,1,o,i,n,e,rt,Ut,null,Rt),Y())},i(o){if(!s){for(let a=0;a<i.length;a+=1)b(t[a]);s=!0}},o(o){for(let a=0;a<t.length;a+=1)y(t[a]);s=!1},d(o){o&&h(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Ti(r,e,t){let n,s,i;return x(r,me,o=>t(0,n=o)),x(r,ee,o=>t(1,s=o)),x(r,ge,o=>t(2,i=o)),[n,s,i,o=>pn(o)]}class vn extends A{constructor(e){super(),B(this,e,Ti,Mi,N,{})}}function Pi(r){let e,t,n,s,i,l,o,a,c;return t=new vn({}),{c(){e=E("section"),I(t.$$.fragment),n=j(),s=E("button"),i=q("Generate mask"),this.h()},l(f){e=C(f,"SECTION",{class:!0});var d=v(e);O(t.$$.fragment,d),n=H(d),s=C(d,"BUTTON",{class:!0});var g=v(s);i=W(g,"Generate mask"),g.forEach(h),d.forEach(h),this.h()},h(){m(s,"class",l=`btn w-full btn-secondary text-white text-lg font-bold ${!r[0].samMaskRequest&&"btn-disabled"}`),m(e,"class","flex flex-col items-start w-full gap-9 mt-5")},m(f,d){k(f,e,d),D(t,e,null),_(e,n),_(e,s),_(s,i),o=!0,a||(c=se(s,"click",hi),a=!0)},p(f,[d]){(!o||d&1&&l!==(l=`btn w-full btn-secondary text-white text-lg font-bold ${!f[0].samMaskRequest&&"btn-disabled"}`))&&m(s,"class",l)},i(f){o||(b(t.$$.fragment,f),o=!0)},o(f){y(t.$$.fragment,f),o=!1},d(f){f&&h(e),M(t),a=!1,c()}}}function Ai(r,e,t){let n;return x(r,$,s=>t(0,n=s)),[n]}class Bi extends A{constructor(e){super(),B(this,e,Ai,Pi,N,{})}}function Ni(r){let e,t,n;return t=new vn({}),{c(){e=E("section"),I(t.$$.fragment),this.h()},l(s){e=C(s,"SECTION",{class:!0});var i=v(e);O(t.$$.fragment,i),i.forEach(h),this.h()},h(){m(e,"class","flex flex-1 flex-col items-start w-full gap-9 mt-5")},m(s,i){k(s,e,i),D(t,e,null),n=!0},p:S,i(s){n||(b(t.$$.fragment,s),n=!0)},o(s){y(t.$$.fragment,s),n=!1},d(s){s&&h(e),M(t)}}}class qt extends A{constructor(e){super(),B(this,e,null,Ni,N,{})}}const Oi=r=>{const e=ge.retrieve();let t;e.includes(r)?t=e.filter(n=>n!==r):t=[...e,r],ge.store(t),Vi()},Vi=()=>{$.saving.enable(),ji(),ge.retrieve().length&&Hi()},ji=()=>{if(U.retrieve().points){const t=K(F);U.resetLayerGroup(t,ie.points)}},Hi=async()=>{const r=await ke(()=>import("../chunks/leaflet-src.e35a4304.js").then(l=>l.l),[],import.meta.url),t=F.retrieve().getCenter(),n=r.marker(t,{opacity:0}),i={labels:ge.retrieve()};U.addLayerWithProperties(n,i,ie.points)};function Wt(r,e,t){const n=r.slice();return n[3]=e[t],n}function Ft(r){let e,t,n;return t=new bn({props:{color:"#202124"}}),{c(){e=E("i"),I(t.$$.fragment),this.h()},l(s){e=C(s,"I",{class:!0});var i=v(e);O(t.$$.fragment,i),i.forEach(h),this.h()},h(){m(e,"class","text-2xl hover:text-3xl mr-2")},m(s,i){k(s,e,i),D(t,e,null),n=!0},i(s){n||(b(t.$$.fragment,s),n=!0)},o(s){y(t.$$.fragment,s),n=!1},d(s){s&&h(e),M(t)}}}function Jt(r,e){let t,n=e[3].name.charAt(0).toUpperCase()+e[3].name.slice(1)+"",s,i,l,o=e[1].includes(e[3].name),a,c,f,d,g,u,p,w=o&&Ft();function T(){return e[2](e[3])}return{key:r,first:null,c(){t=E("button"),s=q(n),i=j(),l=E("div"),w&&w.c(),a=j(),c=E("div"),d=j(),this.h()},l(Q){t=C(Q,"BUTTON",{class:!0});var P=v(t);s=W(P,n),i=H(P),l=C(P,"DIV",{class:!0});var V=v(l);w&&w.l(V),a=H(V),c=C(V,"DIV",{class:!0,style:!0}),v(c).forEach(h),V.forEach(h),d=H(P),P.forEach(h),this.h()},h(){m(c,"class","w-[65px] h-[28px]"),m(c,"style",f=`background-color: ${e[3].color}70;
                        border: 1px solid ${e[3].color}50;`),m(l,"class","flex h-full items-center"),m(t,"class","tab w-full justify-between pl-2 pr-0 hover:text-[#2576E8]"),this.first=t},m(Q,P){k(Q,t,P),_(t,s),_(t,i),_(t,l),w&&w.m(l,null),_(l,a),_(l,c),_(t,d),g=!0,u||(p=se(t,"click",T),u=!0)},p(Q,P){e=Q,(!g||P&1)&&n!==(n=e[3].name.charAt(0).toUpperCase()+e[3].name.slice(1)+"")&&te(s,n),P&3&&(o=e[1].includes(e[3].name)),o?w?P&3&&b(w,1):(w=Ft(),w.c(),b(w,1),w.m(l,a)):w&&(X(),y(w,1,1,()=>{w=null}),Y()),(!g||P&1&&f!==(f=`background-color: ${e[3].color}70;
                        border: 1px solid ${e[3].color}50;`))&&m(c,"style",f)},i(Q){g||(b(w),g=!0)},o(Q){y(w),g=!1},d(Q){Q&&h(t),w&&w.d(),u=!1,p()}}}function zi(r){let e,t,n=[],s=new Map,i,l=r[0];const o=a=>a[3].name;for(let a=0;a<l.length;a+=1){let c=Wt(r,l,a),f=o(c);s.set(f,n[a]=Jt(f,c))}return{c(){e=E("section"),t=E("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=C(a,"SECTION",{class:!0});var c=v(e);t=C(c,"DIV",{class:!0});var f=v(t);for(let d=0;d<n.length;d+=1)n[d].l(f);f.forEach(h),c.forEach(h),this.h()},h(){m(t,"class","flex flex-col flex-1 w-full"),m(e,"class","flex flex-1 flex-col items-start w-full gap-9 mt-5")},m(a,c){k(a,e,c),_(e,t);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,null);i=!0},p(a,[c]){c&3&&(l=a[0],X(),n=Re(n,c,o,1,a,l,s,t,rt,Jt,null,Wt),Y())},i(a){if(!i){for(let c=0;c<l.length;c+=1)b(n[c]);i=!0}},o(a){for(let c=0;c<n.length;c+=1)y(n[c]);i=!1},d(a){a&&h(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}function Ri(r,e,t){let n,s;return x(r,me,l=>t(0,n=l)),x(r,ge,l=>t(1,s=l)),[n,s,l=>Oi(l.name)]}class Gi extends A{constructor(e){super(),B(this,e,Ri,zi,N,{})}}const Ui=()=>{const r=F.retrieve();if(!r)return;const{samPrompts:e}=U.retrieve(),t=new L.Control.Draw({position:ln,edit:{featureGroup:e},draw:Qn});return r.addControl(t),qi(),t},qi=()=>{const r=document.getElementsByClassName("leaflet-draw-draw-marker")[0];r&&r.click()},Wi=r=>{const e=F.retrieve();!e||!r||e.removeControl(r)},Ln=async r=>{const e=ee.retrieve().name,t={label:e,prompt:!0},n=U.addLayerWithProperties(r.layer,t,ie.samPrompts);$.saving.enable(),$.samMaskRequest.enable(),await st(),mn(n,e)},yn=r=>{const{layers:e}=r,t=F.retrieve();e.eachLayer(n=>{t.removeLayer(n)}),$.saving.enable(),$.samMaskRequest.enable()},kn=async r=>{if(!document.getElementsByClassName("leaflet-draw-toolbar-button-enabled").length)return;const t=L.marker(r.latlng),n=ee.retrieve().name,s={background:je,label:n,prompt:!0},i=U.addLayerWithProperties(t,s,ie.samPrompts);$.saving.enable(),$.samMaskRequest.enable(),await st();const l=i.getElement();l==null||l.classList.add("background-marker")},Fi=()=>{const r=F.retrieve();r&&(Ji(r),Zi(r),Qi(r))},Ji=r=>{r.on(L.Draw.Event.CREATED,Ln)},Zi=r=>{r.on(L.Draw.Event.DELETED,yn)},Qi=r=>{r.on("contextmenu",kn)},Xi=()=>{const r=F.retrieve();r&&(Yi(r),Ki(r),xi(r))},Yi=r=>{r.off(L.Draw.Event.CREATED,Ln)},Ki=r=>{r.off(L.Draw.Event.DELETED,yn)},xi=r=>{r.off("contextmenu",kn)};function $i(r){let e;return Se(()=>{e=Ui(),Fi()}),be(()=>{Wi(e),Xi()}),[]}class el extends A{constructor(e){super(),B(this,e,$i,null,N,{})}}const wn=r=>{const{layers:e}=r;e.eachLayer(t=>{U.removeLayer(t,ie.rectangles)}),$.saving.enable()},En=r=>{const{layer:e}=r;e.options.color=ee.retrieve().color,e.options.fillOpacity=oe.retrieve().opacity;const t=e.getBounds();e.feature={type:"Feature",properties:{label:ee.retrieve().name,bbox:[[t._southWest.lat,t._northEast.lng],[t._northEast.lat,t._southWest.lng]]}},U.addLayerWithProperties(e,e.feature.properties,ie.rectangles),$.saving.enable()},Cn=r=>{const{layers:e}=r;e.eachLayer(t=>{if(t instanceof L.Rectangle){const n=t.getBounds();t.feature.properties.bbox=[[n._southWest.lat,n._northEast.lng],[n._northEast.lat,n._southWest.lng]]}t.feature.properties.updatedAt=new Date}),$.saving.enable()},tl=()=>{const r=F.retrieve();r&&(r.on(L.Draw.Event.CREATED,En),r.on(L.Draw.Event.EDITED,Cn),r.on(L.Draw.Event.DELETED,wn))},nl=()=>{const r=F.retrieve();r&&(r.off(L.Draw.Event.CREATED,En),r.off(L.Draw.Event.EDITED,Cn),r.off(L.Draw.Event.DELETED,wn))},rl=()=>{const r=F.retrieve();if(!r)return;const{rectangles:e}=U.retrieve(),t=new L.Control.Draw({position:ln,edit:{featureGroup:e},draw:Xn});return r.addControl(t),sl(),t},sl=()=>{const r=document.getElementsByClassName("leaflet-draw-draw-rectangle")[0];r&&r.click()},il=r=>{const e=F.retrieve();!e||!r||e.removeControl(r)};function ll(r,e,t){let n;x(r,U,i=>t(1,n=i));let s;return be(()=>{il(s),t(0,s=null),nl()}),r.$$.update=()=>{r.$$.dirty&3&&n!=null&&n.rectangles&&(s||(t(0,s=rl()),tl()))},[s,n]}class ol extends A{constructor(e){super(),B(this,e,ll,null,N,{})}}const Sn=r=>{const e=F.retrieve();!e||!r||e.removeControl(r)},In=()=>{const{multipolygons:r}=U.retrieve(),e=ee.retrieve().name;let t;return r.eachLayer(n=>{var s,i;((i=(s=n.feature)==null?void 0:s.properties)==null?void 0:i.label)===e&&(t=n)}),t||null},al=r=>r.toGeoJSON().features[0],cl=()=>{const r=In();return r?al(r):null},fl=r=>{const e=In();e&&U.removeLayer(e,ie.multipolygons),r&&r.properties&&(r.properties.label=ee.retrieve().name);const t=oe.retrieve().opacity,n=L.geoJSON(r,{style:{color:ee.retrieve().color,weight:.4,fillOpacity:t}}),s={label:ee.retrieve().name,multipolygon:!0};return U.addLayerWithProperties(n,s,ie.multipolygons),$.saving.enable(),n},Dn=()=>{const r=F.retrieve();return r?L.control.paintPolygon({initData:cl,drawCallback:fl}).addTo(r):void 0},ul=r=>(Sn(r),Dn());function dl(r,e,t){let n,s,i;x(r,F,o=>t(1,n=o)),x(r,de,o=>t(2,s=o)),x(r,ee,o=>t(3,i=o));let l;return Se(async()=>{await ke(()=>import("../chunks/PaintPolygon.9a9c653d.js"),["../chunks/PaintPolygon.9a9c653d.js","../assets/PaintPolygon.4f676f7b.css"],import.meta.url),t(0,l=Dn())}),be(()=>{Sn(l),t(0,l=null)}),r.$$.update=()=>{r.$$.dirty&15&&i!=null&&i.name&&s!=null&&s.name&&n&&l&&t(0,l=ul(l))},[l,n,s,i]}class ml extends A{constructor(e){super(),B(this,e,dl,null,N,{})}}const Ye=[{name:"Options",icon:ui,component:Ys},{name:"SAM",icon:ai,component:Bi,control:el},{name:"Segmentation",icon:$s,component:qt,control:ml},{name:"Classification",icon:ii,component:Gi},{name:"Detection",icon:ni,component:qt,control:ol}];function hl(){const r=le(Ye[0]),{subscribe:e,set:t}=r;return{subscribe:e,store:n=>t(n),retrieve:()=>K(r)}}const Ce=hl();function gl(r){let e,t,n=r[0].name+"",s;return{c(){e=E("header"),t=E("h2"),s=q(n),this.h()},l(i){e=C(i,"HEADER",{class:!0});var l=v(e);t=C(l,"H2",{});var o=v(t);s=W(o,n),o.forEach(h),l.forEach(h),this.h()},h(){m(e,"class","w-full bg-info py-2 px-3 text-white text-lg flex gap-5 items-center flex-row rounded-t-md justify-center border-b")},m(i,l){k(i,e,l),_(e,t),_(t,s)},p(i,[l]){l&1&&n!==(n=i[0].name+"")&&te(s,n)},i:S,o:S,d(i){i&&h(e)}}}function _l(r,e,t){let n;return x(r,Ce,s=>t(0,n=s)),[n]}class bl extends A{constructor(e){super(),B(this,e,_l,gl,N,{})}}const pl=pe.retrieve(),Mn=async()=>{const r=ct(),e=de.retrieve().name;Fe(r);let t=sn;const n=new Promise(async(s,i)=>{dn();try{const l=await vl(r,e);if(!l.ok)throw t===t&&(t=l.statusText),new Error;await l.json(),$.saving.disable(),$.samMaskRequest.disable(),Ve(),s()}catch{Ve(),i()}});re.promise(n,{loading:"Saving...",success:"Saved",error:()=>t})},vl=async(r,e)=>await fetch(pl+"/geojson",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({geojson:r,name:e})}),Tn=()=>{$.saving.retrieve()&&ws()&&(Mn(),$.saving.disable())},Ll=r=>{Ce.retrieve().name!==r.name&&(Tn(),$.saving.disable(),$.samMaskRequest.disable(),Ce.store(r))};function Zt(r,e,t){const n=r.slice();return n[3]=e[t],n}function Qt(r){let e,t,n,s,i,l,o;var a=r[3].icon;function c(d){return{props:{size:d[1]}}}a&&(t=ae(a,c(r)));function f(){return r[2](r[3])}return{c(){e=E("button"),t&&I(t.$$.fragment),n=j(),this.h()},l(d){e=C(d,"BUTTON",{class:!0});var g=v(e);t&&O(t.$$.fragment,g),n=H(g),g.forEach(h),this.h()},h(){m(e,"class",s=`btn btn-primary px-2 rounded-none 
			${r[3].name===r[0].name&&"btn-active"}
			`)},m(d,g){k(d,e,g),t&&D(t,e,null),_(e,n),i=!0,l||(o=se(e,"click",f),l=!0)},p(d,g){if(r=d,a!==(a=r[3].icon)){if(t){X();const u=t;y(u.$$.fragment,1,0,()=>{M(u,1)}),Y()}a?(t=ae(a,c(r)),I(t.$$.fragment),b(t.$$.fragment,1),D(t,e,n)):t=null}(!i||g&1&&s!==(s=`btn btn-primary px-2 rounded-none 
			${r[3].name===r[0].name&&"btn-active"}
			`))&&m(e,"class",s)},i(d){i||(t&&b(t.$$.fragment,d),i=!0)},o(d){t&&y(t.$$.fragment,d),i=!1},d(d){d&&h(e),t&&M(t),l=!1,o()}}}function yl(r){let e,t,n=Ye,s=[];for(let l=0;l<n.length;l+=1)s[l]=Qt(Zt(r,n,l));const i=l=>y(s[l],1,1,()=>{s[l]=null});return{c(){e=E("div");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=C(l,"DIV",{class:!0});var o=v(e);for(let a=0;a<s.length;a+=1)s[a].l(o);o.forEach(h),this.h()},h(){m(e,"class","col-span-1 bg-slate-100 flex flex-col items-centergap-3")},m(l,o){k(l,e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(l,[o]){if(o&3){n=Ye;let a;for(a=0;a<n.length;a+=1){const c=Zt(l,n,a);s[a]?(s[a].p(c,o),b(s[a],1)):(s[a]=Qt(c),s[a].c(),b(s[a],1),s[a].m(e,null))}for(X(),a=n.length;a<s.length;a+=1)i(a);Y()}},i(l){if(!t){for(let o=0;o<n.length;o+=1)b(s[o]);t=!0}},o(l){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)y(s[o]);t=!1},d(l){l&&h(e),On(s,l)}}}function kl(r,e,t){let n;return x(r,Ce,l=>t(0,n=l)),[n,Yn,l=>Ll(l)]}class wl extends A{constructor(e){super(),B(this,e,kl,yl,N,{})}}function El(r){let e,t,n,s;return{c(){e=E("button"),t=q("Save"),this.h()},l(i){e=C(i,"BUTTON",{class:!0});var l=v(e);t=W(l,"Save"),l.forEach(h),this.h()},h(){m(e,"class","w-full bg-action hover:bg-hover py-2 px-3 text-white text-lg flex gap-5 items-center flex-row rounded-b-md justify-center border-b")},m(i,l){k(i,e,l),_(e,t),n||(s=se(e,"click",r[0]),n=!0)},p:S,i:S,o:S,d(i){i&&h(e),n=!1,s()}}}function Cl(r){return[()=>Mn()]}class Sl extends A{constructor(e){super(),B(this,e,Cl,El,N,{})}}const Il=r=>{Fe(r),at(r)},Dl=pe.retrieve(),{geojsonEndpoint:Ml}=Ie,Tl=async()=>{var s;const r=(s=de.retrieve())==null?void 0:s.name;if(!r)return;const e=Dl+Ml+r,n=await(await fetch(e)).json();if(console.log(n),!n.status_code)return n},Pn=async()=>{Ee.markAnnotationsAsLoading();const r=await Tl();Ee.markAnnotationsAsLoaded(),Il(r)},Pl=pe.retrieve(),{imagesEndpoint:Al}=Ie,Bl=async()=>{const r=await fetch(Pl+Al);if(!r.ok)return;const e=await r.json();fn.store(e),e.length&&(de.store(e[0]),Ue()),Ee.markImagesAsLoaded()},{labelsEndpoint:Nl}=Ie,Ol=async()=>{const r=pe.retrieve(),e=await fetch(r+Nl);if(!e.ok)return;const t=await e.json();if(console.log(t),!t.status_code){const{labels:n}=t;n.length&&Vl(n)}Ee.markLabelsAsLoaded()},Vl=r=>{jl(r),ee.store(r[0])},jl=r=>{me.store(r)},Hl=async()=>{await Ol(),await Bl(),Pn()},An=()=>{const r=F.retrieve();r&&U.init(r)},Bn=()=>{const r=F.retrieve();r&&(ks(),U.remove(r))},zl=()=>{Bn(),An()},Xt=r=>{const e=de.retrieve().name;r.name!==e&&(Tn(),de.store(r),Ue(),zl(),ge.empty(),Pn())};function Yt(r,e,t){const n=r.slice();return n[2]=e[t],n}function Kt(r,e){let t,n=e[2].name+"",s,i,l,o,a;return{key:r,first:null,c(){t=E("button"),s=q(n),i=j(),this.h()},l(c){t=C(c,"BUTTON",{class:!0});var f=v(t);s=W(f,n),i=H(f),f.forEach(h),this.h()},h(){m(t,"class",l=`tab ${e[2].name===e[1].name&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`),this.first=t},m(c,f){k(c,t,f),_(t,s),_(t,i),o||(a=se(t,"click",function(){jn(Xt(e[2]))&&Xt(e[2]).apply(this,arguments)}),o=!0)},p(c,f){e=c,f&1&&n!==(n=e[2].name+"")&&te(s,n),f&3&&l!==(l=`tab ${e[2].name===e[1].name&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`)&&m(t,"class",l)},d(c){c&&h(t),o=!1,a()}}}function Rl(r){let e,t,n=[],s=new Map,i=r[0];const l=o=>o[2].name;for(let o=0;o<i.length;o+=1){let a=Yt(r,i,o),c=l(a);s.set(c,n[o]=Kt(c,a))}return{c(){e=E("section"),t=E("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=C(o,"SECTION",{class:!0});var a=v(e);t=C(a,"DIV",{class:!0});var c=v(t);for(let f=0;f<n.length;f+=1)n[f].l(c);c.forEach(h),a.forEach(h),this.h()},h(){m(t,"class","flex flex-col flex-1 w-full justify-end"),m(e,"class","flex flex-1 flex-col w-full gap-9 mt-5")},m(o,a){k(o,e,a),_(e,t);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null)},p(o,[a]){a&3&&(i=o[0],n=Re(n,a,l,1,o,i,s,t,Vn,Kt,null,Yt))},i:S,o:S,d(o){o&&h(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Gl(r,e,t){let n,s;return x(r,fn,i=>t(0,n=i)),x(r,de,i=>t(1,s=i)),[n,s]}class Ul extends A{constructor(e){super(),B(this,e,Gl,Rl,N,{})}}const{labelsEndpoint:ql}=Ie,Wl=async()=>{const r=me.retrieve();if(!r.length)return;const e=pe.retrieve();Fl(r,e)},Fl=async(r,e)=>{const t=await fetch(e+ql,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({labels:r})}),n=await t.json();t.ok||alert(JSON.stringify(n.detail))},Jl=(r,e)=>{r&&(Zl(r,e)||(Ql(r,e),pn({name:r,color:e}),Wl(),Xl(r)))},Zl=(r,e)=>{const t=me.retrieve(),n=t.some(i=>i.name===r),s=t.some(i=>i.color===e);return n?(re.error(`The label "${r}" already exists`),!0):s?(re.error("A label with this color already exists"),!0):!1},Ql=(r,e)=>{me.add({name:r,color:e})},Xl=r=>{we.retrieve().includes(r)&&_n()};function Yl(r){let e,t,n,s,i,l,o,a,c,f;return{c(){e=E("form"),t=E("label"),n=E("input"),s=j(),i=E("input"),l=j(),o=E("button"),a=q("+"),this.h()},l(d){e=C(d,"FORM",{});var g=v(e);t=C(g,"LABEL",{type:!0,name:!0,class:!0});var u=v(t);n=C(u,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0,autocomplete:!0}),s=H(u),i=C(u,"INPUT",{id:!0,type:!0,name:!0,class:!0}),l=H(u),o=C(u,"BUTTON",{class:!0});var p=v(o);a=W(p,"+"),p.forEach(h),u.forEach(h),g.forEach(h),this.h()},h(){m(n,"type","text"),m(n,"name","newLabel"),m(n,"placeholder","New label"),m(n,"class","input input-bordered w-full rounded-l-md"),m(n,"autocomplete","off"),m(i,"id","nativeColorPicker1"),m(i,"type","color"),m(i,"name","newColor"),m(i,"class","h-auto"),m(o,"class","btn btn-secondary rounded-r-md text-white font-bold text-2xl px-2"),m(t,"type","text"),m(t,"name","newLabel"),m(t,"class","flex")},m(d,g){k(d,e,g),_(e,t),_(t,n),Ne(n,r[0]),_(t,s),_(t,i),Ne(i,r[1]),_(t,l),_(t,o),_(o,a),c||(f=[se(n,"input",r[3]),se(i,"input",r[4]),se(e,"submit",Hn(r[2]))],c=!0)},p(d,[g]){g&1&&n.value!==d[0]&&Ne(n,d[0]),g&2&&Ne(i,d[1])},i:S,o:S,d(d){d&&h(e),c=!1,nt(f)}}}function Kl(r,e,t){let n=Kn,s=xn;const i=()=>{Jl(n.trim().toLocaleLowerCase(),s),t(0,n="")};function l(){n=this.value,t(0,n)}function o(){s=this.value,t(1,s)}return[n,s,i,l,o]}class xl extends A{constructor(e){super(),B(this,e,Kl,Yl,N,{})}}function $l(r,e,t){let n;return x(r,F,s=>t(0,n=s)),An(),be(()=>{n&&Bn()}),[]}class eo extends A{constructor(e){super(),B(this,e,$l,null,N,{})}}function xt(r){let e,t;return e=new eo({}),{c(){I(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,s){D(e,n,s),t=!0},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function $t(r){let e,t;return e=new xl({}),{c(){I(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,s){D(e,n,s),t=!0},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function en(r){let e,t,n=!r[0].areAnnotationsLoading&&tn(r);return{c(){n&&n.c(),e=R()},l(s){n&&n.l(s),e=R()},m(s,i){n&&n.m(s,i),k(s,e,i),t=!0},p(s,i){s[0].areAnnotationsLoading?n&&(X(),y(n,1,1,()=>{n=null}),Y()):n?(n.p(s,i),i&1&&b(n,1)):(n=tn(s),n.c(),b(n,1),n.m(e.parentNode,e))},i(s){t||(b(n),t=!0)},o(s){y(n),t=!1},d(s){n&&n.d(s),s&&h(e)}}}function tn(r){let e,t,n;var s=r[1].control;function i(l){return{}}return s&&(e=ae(s,i())),{c(){e&&I(e.$$.fragment),t=R()},l(l){e&&O(e.$$.fragment,l),t=R()},m(l,o){e&&D(e,l,o),k(l,t,o),n=!0},p(l,o){if(o&2&&s!==(s=l[1].control)){if(e){X();const a=e;y(a.$$.fragment,1,0,()=>{M(a,1)}),Y()}s?(e=ae(s,i()),I(e.$$.fragment),b(e.$$.fragment,1),D(e,t.parentNode,t)):e=null}},i(l){n||(e&&b(e.$$.fragment,l),n=!0)},o(l){e&&y(e.$$.fragment,l),n=!1},d(l){l&&h(t),e&&M(e,l)}}}function to(r){let e,t,n,s,i,l,o,a,c=!r[0].areImagesLoading&&!r[0].areLabelsLoading&&xt(),f=r[1].name!=="Options"&&$t();var d=r[1].component;function g(p){return{}}d&&(s=ae(d,g()));let u=r[1].control&&en(r);return o=new Ul({}),{c(){c&&c.c(),e=j(),t=E("div"),f&&f.c(),n=j(),s&&I(s.$$.fragment),i=j(),u&&u.c(),l=j(),I(o.$$.fragment),this.h()},l(p){c&&c.l(p),e=H(p),t=C(p,"DIV",{class:!0});var w=v(t);f&&f.l(w),n=H(w),s&&O(s.$$.fragment,w),i=H(w),u&&u.l(w),l=H(w),O(o.$$.fragment,w),w.forEach(h),this.h()},h(){m(t,"class","col-span-7 p-5 h-full flex flex-col justify-between w-[280px]")},m(p,w){c&&c.m(p,w),k(p,e,w),k(p,t,w),f&&f.m(t,null),_(t,n),s&&D(s,t,null),_(t,i),u&&u.m(t,null),_(t,l),D(o,t,null),a=!0},p(p,[w]){if(!p[0].areImagesLoading&&!p[0].areLabelsLoading?c?w&1&&b(c,1):(c=xt(),c.c(),b(c,1),c.m(e.parentNode,e)):c&&(X(),y(c,1,1,()=>{c=null}),Y()),p[1].name!=="Options"?f?w&2&&b(f,1):(f=$t(),f.c(),b(f,1),f.m(t,n)):f&&(X(),y(f,1,1,()=>{f=null}),Y()),w&2&&d!==(d=p[1].component)){if(s){X();const T=s;y(T.$$.fragment,1,0,()=>{M(T,1)}),Y()}d?(s=ae(d,g()),I(s.$$.fragment),b(s.$$.fragment,1),D(s,t,i)):s=null}p[1].control?u?(u.p(p,w),w&2&&b(u,1)):(u=en(p),u.c(),b(u,1),u.m(t,l)):u&&(X(),y(u,1,1,()=>{u=null}),Y())},i(p){a||(b(c),b(f),s&&b(s.$$.fragment,p),b(u),b(o.$$.fragment,p),a=!0)},o(p){y(c),y(f),s&&y(s.$$.fragment,p),y(u),y(o.$$.fragment,p),a=!1},d(p){c&&c.d(p),p&&h(e),p&&h(t),f&&f.d(),s&&M(s),u&&u.d(),M(o)}}}function no(r,e,t){let n,s;return x(r,Ee,i=>t(0,n=i)),x(r,Ce,i=>t(1,s=i)),[n,s]}class ro extends A{constructor(e){super(),B(this,e,no,to,N,{})}}function so(r){let e,t,n,s,i,l,o,a,c,f;return t=new bl({}),i=new wl({}),o=new ro({}),c=new Sl({}),{c(){e=E("section"),I(t.$$.fragment),n=j(),s=E("div"),I(i.$$.fragment),l=j(),I(o.$$.fragment),a=j(),I(c.$$.fragment),this.h()},l(d){e=C(d,"SECTION",{class:!0,style:!0});var g=v(e);O(t.$$.fragment,g),n=H(g),s=C(g,"DIV",{class:!0});var u=v(s);O(i.$$.fragment,u),l=H(u),O(o.$$.fragment,u),u.forEach(h),a=H(g),O(c.$$.fragment,g),g.forEach(h),this.h()},h(){m(s,"class","grid grid-cols-8 h-full"),m(e,"class","fixed z-20 bg-[#fafdfe] flex flex-col m-6 rounded-md h-full w-[320px]"),G(e,"height","-webkit-fill-available")},m(d,g){k(d,e,g),D(t,e,null),_(e,n),_(e,s),D(i,s,null),_(s,l),D(o,s,null),_(e,a),D(c,e,null),f=!0},p:S,i(d){f||(b(t.$$.fragment,d),b(i.$$.fragment,d),b(o.$$.fragment,d),b(c.$$.fragment,d),f=!0)},o(d){y(t.$$.fragment,d),y(i.$$.fragment,d),y(o.$$.fragment,d),y(c.$$.fragment,d),f=!1},d(d){d&&h(e),M(t),M(i),M(o),M(c)}}}function io(r,e,t){let n,s;return x(r,F,i=>t(0,n=i)),x(r,$n,i=>t(1,s=i)),r.$$.update=()=>{r.$$.dirty&3&&s.url.origin&&n&&Hl()},[n,s]}class lo extends A{constructor(e){super(),B(this,e,io,so,N,{})}}function nn(r){let e;const t=r[5].default,n=xe(t,r,r[4],null);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,i){n&&n.m(s,i),e=!0},p(s,i){n&&n.p&&(!e||i&16)&&$e(n,t,s,s[4],e?tt(t,s[4],i,null):et(s[4]),null)},i(s){e||(b(n,s),e=!0)},o(s){y(n,s),e=!1},d(s){n&&n.d(s)}}}function oo(r){let e,t,n=r[0]&&nn(r);return{c(){e=E("div"),n&&n.c(),this.h()},l(s){e=C(s,"DIV",{id:!0,class:!0});var i=v(e);n&&n.l(i),i.forEach(h),this.h()},h(){m(e,"id","map"),m(e,"class","svelte-xoi8de")},m(s,i){k(s,e,i),n&&n.m(e,null),t=!0},p(s,[i]){s[0]?n?(n.p(s,i),i&1&&b(n,1)):(n=nn(s),n.c(),b(n,1),n.m(e,null)):n&&(X(),y(n,1,1,()=>{n=null}),Y())},i(s){t||(b(n),t=!0)},o(s){y(n),t=!1},d(s){s&&h(e),n&&n.d()}}}let ao=12;function co(r,e,t){let n;x(r,F,d=>t(0,n=d));let{$$slots:s={},$$scope:i}=e,{options:l={attributionControl:!1,drawControls:!0,max_zoom:20}}=e,{zoomPosition:o="bottomright"}=e,{panes:a=[{name:"default",zIndex:200},{name:"sam",zIndex:400}]}=e,c=[42.0407,3.1],f;return Se(async()=>{if(!f){const d=await ke(()=>import("../chunks/leaflet-src.e35a4304.js").then(g=>g.l),[],import.meta.url);await ke(()=>import("../chunks/leaflet.draw.45fd9d9b.js"),[],import.meta.url),await ke(()=>import("../chunks/leaflet.activearea.bef5e9d0.js"),[],import.meta.url),window.type=!0,f=d.map("map",l).setActiveArea("map-viewport").setView(c,ao),f.zoomControl.setPosition(o),a==null||a.forEach(({name:g,zIndex:u})=>{f.createPane(g),f.getPane(g).style.zIndex=u,f.getPane(g).style.pointerEvents="none"}),F.store(f)}}),be(()=>{F.remove()}),zn("map",{getMap:()=>f}),r.$$set=d=>{"options"in d&&t(1,l=d.options),"zoomPosition"in d&&t(2,o=d.zoomPosition),"panes"in d&&t(3,a=d.panes),"$$scope"in d&&t(4,i=d.$$scope)},[n,l,o,a,i,s]}let fo=class extends A{constructor(e){super(),B(this,e,co,oo,N,{options:1,zoomPosition:2,panes:3})}};function uo(r,e,t){let{url:n}=e,{options:s}=e;const{getMap:i}=Rn("map");let l=null;return Se(()=>{const o=i();l=L.tileLayer(n,s).addTo(o)}),be(()=>{l.remove()}),r.$$set=o=>{"url"in o&&t(0,n=o.url),"options"in o&&t(1,s=o.options)},[n,s]}class mo extends A{constructor(e){super(),B(this,e,uo,null,N,{url:0,options:1})}}function ho(r){let e;return{c(){e=E("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){m(e,"class","map-viewport")},m(t,n){k(t,e,n)},p:S,i:S,o:S,d(t){t&&h(e)}}}class go extends A{constructor(e){super(),B(this,e,null,ho,N,{})}}function _o(r){let e,t;return e=new mo({props:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{maxZoom:20,zIndex:1}}}),{c(){I(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,s){D(e,n,s),t=!0},p:S,i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function bo(r){let e,t,n,s,i;return e=new go({}),s=new fo({props:{$$slots:{default:[_o]},$$scope:{ctx:r}}}),{c(){I(e.$$.fragment),t=j(),n=E("section"),I(s.$$.fragment),this.h()},l(l){O(e.$$.fragment,l),t=H(l),n=C(l,"SECTION",{class:!0});var o=v(n);O(s.$$.fragment,o),o.forEach(h),this.h()},h(){m(n,"class","w-full h-full")},m(l,o){D(e,l,o),k(l,t,o),k(l,n,o),D(s,n,null),i=!0},p(l,[o]){const a={};o&1&&(a.$$scope={dirty:o,ctx:l}),s.$set(a)},i(l){i||(b(e.$$.fragment,l),b(s.$$.fragment,l),i=!0)},o(l){y(e.$$.fragment,l),y(s.$$.fragment,l),i=!1},d(l){M(e,l),l&&h(t),l&&h(n),M(s)}}}class po extends A{constructor(e){super(),B(this,e,null,bo,N,{})}}function vo(r){let e,t,n,s;return e=new lo({}),n=new po({}),{c(){I(e.$$.fragment),t=j(),I(n.$$.fragment)},l(i){O(e.$$.fragment,i),t=H(i),O(n.$$.fragment,i)},m(i,l){D(e,i,l),k(i,t,l),D(n,i,l),s=!0},i(i){s||(b(e.$$.fragment,i),b(n.$$.fragment,i),s=!0)},o(i){y(e.$$.fragment,i),y(n.$$.fragment,i),s=!1},d(i){M(e,i),i&&h(t),M(n,i)}}}function Lo(r){let e,t,n,s,i,l;e=new es({}),s=new ns({});let o=vo();return{c(){I(e.$$.fragment),t=j(),n=E("main"),I(s.$$.fragment),i=j(),o&&o.c(),this.h()},l(a){O(e.$$.fragment,a),t=H(a),n=C(a,"MAIN",{class:!0});var c=v(n);O(s.$$.fragment,c),i=H(c),o&&o.l(c),c.forEach(h),this.h()},h(){m(n,"class","min-w-full relative min-h-full")},m(a,c){D(e,a,c),k(a,t,c),k(a,n,c),D(s,n,null),_(n,i),o&&o.m(n,null),l=!0},p:S,i(a){l||(b(e.$$.fragment,a),b(s.$$.fragment,a),b(o),l=!0)},o(a){y(e.$$.fragment,a),y(s.$$.fragment,a),y(o),l=!1},d(a){M(e,a),a&&h(t),a&&h(n),M(s),o&&o.d()}}}class Io extends A{constructor(e){super(),B(this,e,null,Lo,N,{})}}export{Io as component};
