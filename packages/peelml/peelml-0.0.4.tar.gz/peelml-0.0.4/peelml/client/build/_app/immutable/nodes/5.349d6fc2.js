import{d as oe}from"../chunks/environment.9aa685ef.js";import{S as ne,i as re,s as ce,k as m,a as C,q as U,l as b,m as w,h as y,c as L,r as q,n as i,b as se,D as s,Q as Z,F as R,U as ie,u as K,E as $,G as ae,L as de,o as ue,C as he,W as fe,X as pe,V as _e,Y as x}from"../chunks/index.463cc238.js";import{l as ve}from"../chunks/logo.8522a027.js";import{c as G}from"../chunks/store.4903bc61.js";const ge=oe,me=!0,Oe=Object.freeze(Object.defineProperty({__proto__:null,csr:ge,prerender:me},Symbol.toStringTag,{value:"Module"}));function ee(r,e,t){const a=r.slice();return a[12]=e[t],a[14]=t,a}function te(r,e){let t,a,d,g,f,p,n,T,_,j=e[12].question+"",S,I,E,c,h=e[12].answer+"",v,O,u,V,l,o,k,P,D,F,J;function Q(){return e[7](e[14])}function le(){return e[8](e[14])}return{key:r,first:null,c(){t=m("div"),a=m("div"),d=m("div"),g=m("img"),p=C(),n=m("div"),T=m("p"),_=U("Q: "),S=U(j),I=C(),E=m("p"),c=U("A: "),v=U(h),O=C(),u=m("button"),V=U("👍"),l=C(),o=m("button"),k=U("👎"),P=C(),this.h()},l(B){t=b(B,"DIV",{class:!0});var N=w(t);a=b(N,"DIV",{class:!0});var A=w(a);d=b(A,"DIV",{class:!0});var W=w(d);g=b(W,"IMG",{src:!0,alt:!0,class:!0}),W.forEach(y),p=L(A),n=b(A,"DIV",{class:!0});var M=w(n);T=b(M,"P",{class:!0});var z=w(T);_=q(z,"Q: "),S=q(z,j),z.forEach(y),I=L(M),E=b(M,"P",{class:!0});var H=w(E);c=q(H,"A: "),v=q(H,h),H.forEach(y),O=L(M),u=b(M,"BUTTON",{class:!0});var X=w(u);V=q(X,"👍"),X.forEach(y),l=L(M),o=b(M,"BUTTON",{class:!0});var Y=w(o);k=q(Y,"👎"),Y.forEach(y),M.forEach(y),A.forEach(y),P=L(N),N.forEach(y),this.h()},h(){he(g.src,f=ve)||i(g,"src",f),i(g,"alt","SvelteKit"),i(g,"class","svelte-ji0dhf"),i(d,"class","avatar svelte-ji0dhf"),i(T,"class","svelte-ji0dhf"),i(E,"class","svelte-ji0dhf"),i(u,"class","small-button thumbs-up svelte-ji0dhf"),i(o,"class","small-button thumbs-down svelte-ji0dhf"),i(n,"class","message-content svelte-ji0dhf"),i(a,"class","chat-message-center svelte-ji0dhf"),i(t,"class","chat-message svelte-ji0dhf"),this.first=t},m(B,N){se(B,t,N),s(t,a),s(a,d),s(d,g),s(a,p),s(a,n),s(n,T),s(T,_),s(T,S),s(n,I),s(n,E),s(E,c),s(E,v),s(n,O),s(n,u),s(u,V),s(n,l),s(n,o),s(o,k),s(t,P),F||(J=[R(u,"click",Q),R(o,"click",le),fe(D=je.call(null,t,e[14]===e[0].length-1))],F=!0)},p(B,N){e=B,N&1&&j!==(j=e[12].question+"")&&K(S,j),N&1&&h!==(h=e[12].answer+"")&&K(v,h),D&&pe(D.update)&&N&1&&D.update.call(null,e[14]===e[0].length-1)},d(B){B&&y(t),F=!1,ae(J)}}}function be(r){let e,t,a=[],d=new Map,g,f,p,n,T,_,j=(r[2]?r[3]:"Send")+"",S,I,E,c,h,v,O,u=r[0];const V=l=>l[14];for(let l=0;l<u.length;l+=1){let o=ee(r,u,l),k=V(o);d.set(k,a[l]=te(k,o))}return{c(){e=m("section"),t=m("div");for(let l=0;l<a.length;l+=1)a[l].c();g=C(),f=m("div"),p=m("form"),n=m("input"),T=C(),_=m("button"),S=U(j),E=C(),c=m("p"),h=U("Note - may produce inaccurate information."),this.h()},l(l){e=b(l,"SECTION",{class:!0});var o=w(e);t=b(o,"DIV",{class:!0});var k=w(t);for(let Q=0;Q<a.length;Q+=1)a[Q].l(k);k.forEach(y),g=L(o),f=b(o,"DIV",{class:!0});var P=w(f);p=b(P,"FORM",{class:!0});var D=w(p);n=b(D,"INPUT",{rows:!0,class:!0,placeholder:!0}),T=L(D),_=b(D,"BUTTON",{class:!0,type:!0});var F=w(_);S=q(F,j),F.forEach(y),D.forEach(y),E=L(P),c=b(P,"P",{class:!0});var J=w(c);h=q(J,"Note - may produce inaccurate information."),J.forEach(y),P.forEach(y),o.forEach(y),this.h()},h(){i(t,"class","chat-log svelte-ji0dhf"),i(n,"rows","1"),i(n,"class","chat-input-textarea svelte-ji0dhf"),i(n,"placeholder","Type Message Here"),i(_,"class",I="btnyousend "+(r[1]===""?"":"active")+" svelte-ji0dhf"),i(_,"type","submit"),i(p,"class","chat-input-form svelte-ji0dhf"),i(c,"class","message svelte-ji0dhf"),i(f,"class","chat-input-holder svelte-ji0dhf"),i(e,"class","chatbox svelte-ji0dhf")},m(l,o){se(l,e,o),s(e,t);for(let k=0;k<a.length;k+=1)a[k]&&a[k].m(t,null);s(e,g),s(e,f),s(f,p),s(p,n),Z(n,r[1]),s(p,T),s(p,_),s(_,S),s(f,E),s(f,c),s(c,h),v||(O=[R(n,"input",r[9]),R(p,"submit",r[4])],v=!0)},p(l,[o]){o&33&&(u=l[0],a=ie(a,o,V,1,l,u,d,t,_e,te,null,ee)),o&2&&n.value!==l[1]&&Z(n,l[1]),o&12&&j!==(j=(l[2]?l[3]:"Send")+"")&&K(S,j),o&2&&I!==(I="btnyousend "+(l[1]===""?"":"active")+" svelte-ji0dhf")&&i(_,"class",I)},i:$,o:$,d(l){l&&y(e);for(let o=0;o<a.length;o+=1)a[o].d();v=!1,ae(O)}}}async function ye(r){console.log("INSERT"),console.log("entry",r);const e=await fetch("http://127.0.0.1:5000/preference_table/insert",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(e.ok)console.log("ok! data inserted",e),console.log("entry",r);else{const t=await e.text();alert(t)}}function je(r){setTimeout(()=>{r.scrollIntoView({behavior:"smooth"})},0)}function ke(r,e,t){let a,d;de(r,G,c=>t(0,d=c));let g="",f="",p=!1;ue(()=>{console.log("here we go"),d.length<1&&n()});async function n(){console.log("fetching data from db");const v=(await(await fetch("http://127.0.0.1:5000/preference_table/get")).json()).preference_result;x(G,d=[...v],d),console.log("db",v)}const T=async c=>{c.preventDefault(),g=f,t(1,f=""),t(2,p=!0);let h={id:d.length+1,question:g,answer:"Loading...",vote:"na"};console.log("adding to log here"),x(G,d=[...d,h],d);const v=await fetch(`http://127.0.0.1:5000/objects/retrieve/${g}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:g})});if(v.ok){const O=await v.json();h.answer=O.answer,G.update(u=>(u[u.length-1]=h,u)),ye(h)}else{const O=await v.text();alert(O)}t(2,p=!1)};let _=0;setInterval(()=>{t(6,_=(_+1)%4)},200);async function j(c,h){const v=d[h];v.vote=c;const u=await fetch("http://127.0.0.1:5000/preference_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:h,vote:c})});if(u.ok)console.log("update worked!",u);else{const V=await u.text();alert(V)}}const S=c=>j("good",c),I=c=>j("bad",c);function E(){f=this.value,t(1,f)}return r.$$.update=()=>{r.$$.dirty&64&&t(3,a=".".repeat(_).padEnd(3)),r.$$.dirty&1&&console.log("chat updated!",d)},[d,f,p,a,T,j,_,S,I,E]}class Ie extends ne{constructor(e){super(),re(this,e,ke,be,ce,{})}}export{Ie as component,Oe as universal};
